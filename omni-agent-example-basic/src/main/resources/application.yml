server:
  port: 8080

spring:
  application:
    name: omni-agent-example-basic

# ========== OmniAgent 四维可插拔配置 ==========

# 1. 持久化配置 (Persistence)
omni-agent:
  persistence:
    # 多持久化策略配置
    # composite: 组合模式，支持主+备份多写
    # primary: 主持久化后端（用于读写）
    # secondaries: 备份后端列表（异步写入）
    strategy: composite
    primary-type: sqlite    # 主后端: SQLite（轻量级文件数据库）
    secondary-types:        # 备份后端列表
      - file                # File 作为备份

    # SQLite 配置（主后端）
    sqlite:
      db-path: ./data/omni-agent.db
      auto-create-tables: true
      show-sql: false
      connection-timeout: 30000

    # File 配置（备份后端）
    file:
      base-path: ./data/persistence
      auto-create-dirs: true

  # 2. 文档存储配置 (Document Storage)
  document-storage:
    type: file
    file:
      # 文件存储配置
      base-path: ./data/documents
      chunk-path: ./data/chunks
      image-path: ./data/images
      ppl-path: ./data/ppl
      max-file-size: 104857600  # 100MB

  # 3. RAG 配置 (Retrieval Augmented Generation)
  rag:
    type: file
    file:
      # Lucene 索引配置
      index-path: ./data/rag-index
      analyzer: smartcn  # 智能中文分词器
      max-results: 100
      similarity-threshold: 0.7

  # 4. AI 配置 (Artificial Intelligence)
  ai:
    # type: ollama  # 本地Ollama（开发/测试）
    type: online    # 在线API（生产环境推荐）

    # Ollama 本地配置（开发/测试环境）
    ollama:
      base-url: http://localhost:11434
      model: qwen2.5:latest
      temperature: 0.7
      max-tokens: 2000
      timeout: 30000  # 30秒

    # Online API 配置（生产环境推荐）⭐
    online:
      # API提供商: qianwen(千问), openai, claude, zhipu(智谱)
      provider: qianwen

      # API端点（推荐使用endpoint，更适合企业网关）
      endpoint: https://dashscope.aliyuncs.com/api/v1

      # API Key（从阿里云DashScope获取）
      # 获取地址: https://dashscope.console.aliyun.com/
      api-key: ${QW_API_KEY:your-api-key-here}

      # 模型选择
      # qwen-plus: 平衡性能和成本（推荐）
      # qwen-turbo: 快速响应
      # qwen-max: 最强性能
      default-model: qwen-plus

      # 生成参数
      temperature: 0.7      # 0.0-2.0，控制随机性
      max-tokens: 2048      # 最大生成token数
      top-p: 0.9           # 核采样参数
      timeout: 60000       # 60秒超时
      max-retries: 3       # 最大重试次数
      stream-enabled: true # 启用流式响应

# ========== 日志配置 ==========
logging:
  level:
    root: INFO
    top.yumbo.ai.omni: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
