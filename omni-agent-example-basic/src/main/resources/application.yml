server:
  port: 8080

spring:
  application:
    name: omni-agent-example-basic

  # 文件上传配置 (File Upload Configuration)
  servlet:
    multipart:
      enabled: true
      max-file-size: 100MB      # 单个文件最大100MB
      max-request-size: 100MB   # 整个请求最大100MB
      file-size-threshold: 2KB  # 文件写入磁盘的阈值

# ========== OmniAgent 四维可插拔配置 ==========

# 1. 持久化配置 (Persistence)
omni-agent:
  persistence:
    # 持久化后端类型: sqlite, file, h2, memory, redis, mongodb, elasticsearch
    type: sqlite

    # SQLite 配置
    sqlite:
      db-path: ./data/omni-agent.db
      auto-create-tables: true
      show-sql: false
      connection-timeout: 30000


  # 2. 文档存储配置 (Document Storage)
  document-storage:
    type: file
    file:
      # 文件存储配置
      base-path: ./data/documents
      chunk-path: ./data/chunks
      image-path: ./data/images
      ppl-path: ./data/ppl
      max-file-size: 104857600  # 100MB

  # 3. RAG 配置 (Retrieval Augmented Generation)
  rag:
    type: file
    file:
      # Lucene 索引配置
      index-path: ./data/rag-index
      analyzer: smartcn  # 智能中文分词器
      max-results: 100
      similarity-threshold: 0.7

  # 4. AI 配置 (Artificial Intelligence)
  ai:
    # type: ollama  # 本地Ollama（开发/测试）
    type: online-api    # 在线API（生产环境推荐）

    # Ollama 本地配置（开发/测试环境）
    ollama:
      base-url: http://localhost:11434
      model: qwen2.5:latest
      temperature: 0.7
      max-tokens: 2000
      timeout: 30000  # 30秒

    # Online API 配置（生产环境推荐）⭐
    online:
      # API提供商: qianwen(千问), openai, claude, zhipu(智谱), deepseek
      provider: deepseek

      endpoint: https://api.deepseek.com/v1/chat/completions
      # API基础URL（会自动拼接 /chat/completions）
#      base-url: https://api.deepseek.com/v1

      # API Key（从阿里云DashScope获取）
      # 获取地址: https://dashscope.console.aliyun.com/
      api-key: ${AI_API_KEY:your-api-key-here}

      # 模型选择
      # qwen-plus: 平衡性能和成本（推荐）
      # qwen-turbo: 快速响应
      # qwen-max: 最强性能
      # qwen-vl-plus: 图像理解能力
      default-model: deepseek-chat

      # 生成参数
      temperature: 0.7      # 0.0-2.0，控制随机性
      max-tokens: 2048      # 最大生成token数
      top-p: 0.9           # 核采样参数
      timeout: 60000       # 60秒超时
      max-retries: 3       # 最大重试次数
      stream-enabled: true # 启用流式响应

  # 5. Vision LLM 配置（图片转文字）⭐
  vision-llm:
    # 是否启用图片提取功能
    enabled: true

    # API 配置
    api-key: ${QW_API_KEY:your-api-key-here}

    # 模型选择（支持多模态视觉理解的模型）
    # - qwen-vl-plus: 千问视觉理解增强版（推荐，中文效果好）
    # - qwen-vl-max: 千问视觉理解旗舰版
    # - deepseek-vl: DeepSeek 视觉理解
    # - gpt-4o: OpenAI GPT-4 with Vision
    # - gpt-4-vision-preview: OpenAI GPT-4 Vision
    model: qwen-vl-plus

    # API 端点
    # 千问 VL: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
    # DeepSeek VL: https://api.deepseek.com/v1/chat/completions
    # OpenAI: https://api.openai.com/v1/chat/completions
    endpoint: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions

    # 系统提示词（可自定义）
    system-prompt: |
      请分析这张图片并提取其中的关键信息。
      如果图片包含文字，请完整准确地提取所有文字内容。
      如果是图表或示意图，请描述其主要内容和含义。
      保持输出简洁，只提取核心信息。

# ========== 日志配置 ==========
logging:
  level:
    root: INFO
    top.yumbo.ai.omni: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
