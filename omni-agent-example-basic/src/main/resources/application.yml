server:
  port: 8080

spring:
  application:
    name: omni-agent-p2p-basic

  # æ–‡ä»¶ä¸Šä¼ é…ç½® (File Upload Configuration)
  servlet:
    multipart:
      enabled: true
      max-file-size: 100MB      # å•ä¸ªæ–‡ä»¶æœ€å¤§100MB
      max-request-size: 100MB   # æ•´ä¸ªè¯·æ±‚æœ€å¤§100MB
      file-size-threshold: 2KB  # æ–‡ä»¶å†™å…¥ç£ç›˜çš„é˜ˆå€¼

# ========================================
# OmniAgent æ–‡æ¡£å¤„ç†æµç¨‹é…ç½®
# ========================================
# ğŸ“„ æ–‡æ¡£å¤„ç†æµç¨‹ï¼ˆ6ä¸ªæ­¥éª¤ï¼‰ï¼š
#
# æ­¥éª¤1ï¸âƒ£ æ–‡æ¡£å­˜å‚¨ (Document Storage)
#   â†“ ä¸Šä¼ æ–‡æ¡£åˆ°å­˜å‚¨æœåŠ¡ï¼Œä¿å­˜åŸå§‹æ–‡ä»¶
#
# æ­¥éª¤2ï¸âƒ£ æ–‡æœ¬æå– (Text Extraction / Vision LLM)
#   â†“ ä»PDF/å›¾ç‰‡ç­‰æ–‡ä»¶ä¸­æå–æ–‡æœ¬å†…å®¹
#
# æ­¥éª¤3ï¸âƒ£ æ™ºèƒ½åˆ†å— (Chunking Strategy)
#   â†“ å°†é•¿æ–‡æœ¬åˆ†å‰²æˆåˆé€‚çš„å—
#
# æ­¥éª¤4ï¸âƒ£ å‘é‡åŒ– (Embedding)
#   â†“ å°†æ–‡æœ¬å—è½¬æ¢ä¸ºå‘é‡ï¼ˆå¯é€‰ï¼‰
#
# æ­¥éª¤5ï¸âƒ£ RAGç´¢å¼• (RAG Service)
#   â†“ å­˜å‚¨æ–‡æœ¬å—å’Œå‘é‡ï¼Œå»ºç«‹æ£€ç´¢ç´¢å¼•
#
# æ­¥éª¤6ï¸âƒ£ AIå¯¹è¯ (AI Service)
#   â†“ ä½¿ç”¨æ£€ç´¢ç»“æœè¿›è¡Œæ™ºèƒ½å¯¹è¯
# ========================================
#
# ğŸ“ å­˜å‚¨ç›®å½•ç»“æ„è¯´æ˜ï¼š
# ========================================
# ./data/
# â”œâ”€â”€ documents/              â† ğŸ“¥ åŸå§‹æ–‡ä»¶ä¸­è½¬ç«™ï¼ˆä»…å­˜å‚¨ä¸Šä¼ çš„åŸå§‹æ–‡ä»¶ï¼‰
# â”‚   â””â”€â”€ example.pptx
# â”‚
# â”œâ”€â”€ storage/                â† ğŸ’¾ å¤„ç†ç»“æœå­˜å‚¨ï¼ˆæ‰€æœ‰å¤„ç†ç”Ÿæˆçš„æ•°æ®ï¼‰
# â”‚   â”œâ”€â”€ documents/          â† æ–‡æ¡£å…ƒæ•°æ®
# â”‚   â”œâ”€â”€ extracted/          â† æå–çš„æ–‡æœ¬
# â”‚   â”œâ”€â”€ chunks/             â† åˆ†å—ç»“æœ
# â”‚   â”œâ”€â”€ images/             â† æå–çš„å›¾ç‰‡
# â”‚   â”œâ”€â”€ ppl/                â† PPLåˆ†ææ•°æ®
# â”‚   â””â”€â”€ optimization/       â† ä¼˜åŒ–æ•°æ®
# â”‚
# â”œâ”€â”€ knowledge-network/      â† ğŸ” çŸ¥è¯†åº“ç½‘ç»œ
# â”‚
# â”œâ”€â”€ rag-index/              â† ğŸ” RAGæ£€ç´¢ç´¢å¼•ï¼ˆLucene/å…¶ä»–ï¼‰
# â”‚
# â””â”€â”€ workflows/              â† ğŸ”„ å·¥ä½œæµæ•°æ®
# ========================================
# ========== OmniAgent æ ¸å¿ƒé…ç½®ï¼ˆæŒ‰å¤„ç†æµç¨‹é¡ºåºï¼‰==========
omni-agent:

  # ========== ğŸ¯ ç»Ÿä¸€ ONNX æ¨¡å‹é…ç½® â­ NEW ==========
  # ä½œç”¨ï¼šé¿å…PPLåˆ†å—å’Œæ–‡æœ¬å‘é‡åŒ–é‡å¤åŠ è½½åŒä¸€ä¸ªæ¨¡å‹
  # æ³¨æ„ï¼šå¦‚æœPPLå’ŒEmbeddingä½¿ç”¨ç›¸åŒçš„æ¨¡å‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å…±äº«æ¨¡å‹å®ä¾‹
  onnx:
    # å…±äº«æ¨¡å‹é…ç½®
    shared-model:
      enabled: true                                 # å¯ç”¨æ¨¡å‹å…±äº«
      model-path: ./models/bge-base-zh/model.onnx  # ç»Ÿä¸€æ¨¡å‹è·¯å¾„
      max-sequence-length: 512                      # æœ€å¤§åºåˆ—é•¿åº¦

  # ========== çŸ¥è¯†æ³¨å†Œè¡¨é…ç½® (Knowledge Registry) ==========
  # ä½œç”¨ï¼šç®¡ç†çŸ¥è¯†åŸŸã€è§’è‰²ã€å…³è”å…³ç³»ç­‰å…ƒæ•°æ®
  # æ”¯æŒå¤šç§åç«¯ï¼šfile, sqlite, h2, memory, redis, mongodb, elasticsearch
  knowledge-registry:
    # ========== å½“å‰ä½¿ç”¨çš„åç«¯ç±»å‹ ==========
    type: file

    # ========== File é…ç½®ï¼ˆæ¨èï¼šç®€å•ã€ç›´æ¥ï¼‰==========
    file:
      base-path: ./data/knowledge-network/registry  # å­˜å‚¨è·¯å¾„
      auto-create-directories: true                 # è‡ªåŠ¨åˆ›å»ºç›®å½•
      pretty-print: true                            # JSON æ ¼å¼åŒ–è¾“å‡º

  # ========== æ­¥éª¤1ï¸âƒ£ æ–‡æ¡£å­˜å‚¨é…ç½® (Document Storage) ==========
  # ä½œç”¨ï¼šå­˜å‚¨ä¸Šä¼ çš„åŸå§‹æ–‡ä»¶å’Œæå–çš„æ–‡æœ¬
  # ä½ç½®ï¼šæ–‡æ¡£å¤„ç†æµç¨‹çš„ç¬¬1æ­¥ - æ–‡æ¡£ä¸Šä¼ å’Œå½’æ¡£
  # æ”¯æŒå¤šç§åç«¯ï¼šfile, minio, s3, redis, mongodb, elasticsearch
  document-storage:
    instances:
#      # File å­˜å‚¨ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
      - id: dev-storage
        type: file
        primary: true
        file:
          base-directory: data/storage/
#
#      # MongoDB å­˜å‚¨ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
#      - id: prod-mongo
#        type: mongodb
#        mongodb:
#          database: prod-documents
#
#      # Redis å­˜å‚¨ï¼ˆç¼“å­˜ï¼‰
#      - id: cache
#        type: redis
#        redis:
#          key-prefix: "doc:cache:"
#          ttl: 3600
#
#      # S3 å­˜å‚¨ï¼ˆäº‘ç«¯å¤‡ä»½ï¼‰
#      - id: s3-backup
#        type: s3
#        s3:
#          bucket-name: prod-backup
#          region: us-east-1
#          access-key: ${AWS_ACCESS_KEY}
#          secret-key: ${AWS_SECRET_KEY}
#
#      # MinIO å­˜å‚¨ï¼ˆç§æœ‰äº‘ï¼‰
#      - id: minio-storage
#        type: minio
#        minio:
#          endpoint: http://minio.local:9000
#          bucket-name: documents
#          access-key: minioadmin
#          secret-key: minioadmin
#
#      # Elasticsearch å­˜å‚¨ï¼ˆæœç´¢ï¼‰
#      - id: search-storage
#        type: elasticsearch
#        elasticsearch:
#          chunk-index: searchable-chunks
  # ========== æ­¥éª¤2ï¸âƒ£ Vision LLMé…ç½® (æ–‡æœ¬æå–) ==========
  # ä½œç”¨ï¼šä»å›¾ç‰‡/PDF/officeæ–‡æ¡£ä¸­æå–æ–‡æœ¬
  vision-llm:
    # æ˜¯å¦å¯ç”¨å›¾ç‰‡æå–åŠŸèƒ½
    enabled: true

    # API é…ç½®
    api-key: ${QW_API_KEY:your-api-key-here}

    # æ¨¡å‹é€‰æ‹©ï¼ˆæ”¯æŒå¤šæ¨¡æ€è§†è§‰ç†è§£çš„æ¨¡å‹ï¼‰
    # - qwen-vl-plus: åƒé—®è§†è§‰ç†è§£å¢å¼ºç‰ˆï¼ˆæ¨èï¼Œä¸­æ–‡æ•ˆæœå¥½ï¼‰
    # - qwen-vl-max: åƒé—®è§†è§‰ç†è§£æ——èˆ°ç‰ˆ
    # - deepseek-vl: DeepSeek è§†è§‰ç†è§£
    # - gpt-4o: OpenAI GPT-4 with Vision
    # - gpt-4-vision-preview: OpenAI GPT-4 Vision
    model: qwen-vl-plus

    # API ç«¯ç‚¹
    # åƒé—® VL: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
    # DeepSeek VL: https://api.deepseek.com/v1/chat/completions
    # OpenAI: https://api.openai.com/v1/chat/completions
    endpoint: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions

    # ========== æ™ºèƒ½æ‰¹å¤„ç†é…ç½® â­ ==========
    # æ ¹æ®ä¸Šä¸‹æ–‡å¤§å°åŠ¨æ€å†³å®šæ¯æ‰¹å¤„ç†å¤šå°‘å¼ å¹»ç¯ç‰‡
    batch-processing:
      # æ˜¯å¦å¯ç”¨æ™ºèƒ½æ‰¹å¤„ç†ï¼ˆæ ¹æ®ä¸Šä¸‹æ–‡å¤§å°åŠ¨æ€åˆ†æ‰¹ï¼‰
      enabled: true

      # æœ€å¤§ä¸Šä¸‹æ–‡tokenæ•°ï¼ˆæ ¹æ®æ¨¡å‹é™åˆ¶è°ƒæ•´ï¼‰
      # qwen-vl-plus: 8000, qwen-vl-max: 32000, gpt-4o: 128000
      max-context-tokens: 8000

      # å•å¼ å¹»ç¯ç‰‡é¢„ä¼°tokenæ•°ï¼ˆç”¨äºé¢„åˆ¤æ–­ï¼‰
      # åŒ…æ‹¬ï¼šå›¾ç‰‡token + æ–‡å­—token + æç¤ºè¯token
      estimated-tokens-per-slide: 1500

      # é¢„ç•™tokenæ•°ï¼ˆç”¨äºç³»ç»Ÿæç¤ºè¯å’Œå“åº”ï¼‰
      reserved-tokens: 2000

      # æœ€å°æ‰¹æ¬¡å¤§å°ï¼ˆè‡³å°‘å¤„ç†å¤šå°‘å¼ ï¼‰
      min-batch-size: 1

      # æœ€å¤§æ‰¹æ¬¡å¤§å°ï¼ˆæœ€å¤šå¤„ç†å¤šå°‘å¼ ï¼‰
      max-batch-size: 5

    # ç³»ç»Ÿæç¤ºè¯ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
    system-prompt: |
      è¯·åˆ†æè¿™å¼ å›¾ç‰‡å¹¶æå–å…¶ä¸­çš„å…³é”®ä¿¡æ¯ã€‚
      å¦‚æœå›¾ç‰‡åŒ…å«æ–‡å­—ï¼Œè¯·å®Œæ•´å‡†ç¡®åœ°æå–æ‰€æœ‰æ–‡å­—å†…å®¹ã€‚
      å¦‚æœæ˜¯å›¾è¡¨æˆ–ç¤ºæ„å›¾ï¼Œè¯·æè¿°å…¶ä¸»è¦å†…å®¹å’Œå«ä¹‰ã€‚
      
      ã€é‡è¦ã€‘å¯¹äºåŒ…å«å¤šå¼ å›¾ç‰‡çš„å¹»ç¯ç‰‡ï¼š
      - è¿™äº›å›¾ç‰‡å¯èƒ½æ˜¯ä¸€ä¸ªå®Œæ•´å†…å®¹çš„ä¸åŒéƒ¨åˆ†ï¼ˆå¦‚æµç¨‹å›¾ã€æ¶æ„å›¾ã€éƒ¨ç½²å›¾ï¼‰
      - è¯·ç»¼åˆåˆ†ææ‰€æœ‰å›¾ç‰‡ï¼Œç†è§£å®ƒä»¬çš„æ•´ä½“å«ä¹‰å’Œå…³è”å…³ç³»
      - å›¾ç‰‡æŒ‰ç©ºé—´ä½ç½®æ’åˆ—ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼‰
      
      ä¿æŒè¾“å‡ºç®€æ´ï¼Œåªæå–æ ¸å¿ƒä¿¡æ¯ã€‚

  # ========== æ­¥éª¤3ï¸âƒ£ åˆ†å—ç­–ç•¥é…ç½® (Chunking) ==========
  # ä½œç”¨ï¼šæ™ºèƒ½æ–‡æœ¬åˆ†å—
  chunking:
    # é»˜è®¤ç­–ç•¥ï¼šautoï¼ˆè‡ªåŠ¨é€‰æ‹©ï¼‰ã€fixed_sizeï¼ˆå›ºå®šå¤§å°ï¼‰ã€semanticï¼ˆè¯­ä¹‰ï¼‰ã€pplï¼ˆå›°æƒ‘åº¦ï¼‰
    default-strategy: ppl
    # ========== PPL ONNX é…ç½®ï¼ˆç”¨äºæ­¥éª¤3ï¸âƒ£åˆ†å—ï¼‰ â­ ==========
    # PPL å›°æƒ‘åº¦åˆ†å—ç­–ç•¥é…ç½®
    ppl:
      # æ¨¡å¼é€‰æ‹©ï¼šsimplifiedï¼ˆç®€åŒ–ç‰ˆï¼Œå¿«é€Ÿï¼‰ã€onnxï¼ˆONNXç‰ˆï¼Œç²¾ç¡®ï¼‰ã€autoï¼ˆè‡ªåŠ¨é€‰æ‹©ï¼‰
      mode: onnx  # â­ ä½¿ç”¨ ONNX æ¨¡å¼

      # è‡ªåŠ¨æ¨¡å¼æ—¶æ˜¯å¦ä¼˜å…ˆç²¾åº¦ï¼ˆä¸ºtrueæ—¶ä¼šä¼˜å…ˆä½¿ç”¨ONNXï¼‰
      prefer-accuracy: true  # â­ ä¼˜å…ˆç²¾åº¦

      # åˆ†å—å¤§å°èŒƒå›´
      min-chunk-size: 200      # æœ€å°åˆ†å—å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰
      max-chunk-size: 800      # æœ€å¤§åˆ†å—å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰

      # å›°æƒ‘åº¦é˜ˆå€¼ï¼ˆ0.0-1.0ï¼Œå€¼è¶Šé«˜è¶Šä¸¥æ ¼ï¼‰
      threshold: 0.3
      onnx:
        # å¯ç”¨ ONNX PPL æœåŠ¡
        enabled: true

        # â­ ä½¿ç”¨å…±äº«æ¨¡å‹è·¯å¾„ï¼ˆä¸embedding.onnx.model-pathä¿æŒä¸€è‡´ï¼‰
        # ç³»ç»Ÿä¼šè‡ªåŠ¨å¤ç”¨å·²åŠ è½½çš„æ¨¡å‹ï¼Œé¿å…é‡å¤åŠ è½½
        model-path: ${omni-agent.onnx.shared-model.model-path}

        # Tokenizer è·¯å¾„
        tokenizer-path: ./models/bge-base-zh

        # ç¼“å­˜é…ç½®
        use-cache: true          # å¯ç”¨ç¼“å­˜
        cache-size: 1000         # ç¼“å­˜å¤§å°
        cache-ttl: 3600          # ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰

    # å›ºå®šå¤§å°åˆ†å—ç­–ç•¥é…ç½®ï¼ˆå¤‡ç”¨ï¼‰
    fixed-size:
      chunk-size: 500          # åˆ†å—å¤§å°
      overlap: 50              # é‡å å¤§å°

    # è¯­ä¹‰åˆ†å—ç­–ç•¥é…ç½®ï¼ˆå¤‡ç”¨ï¼‰
    semantic:
      min-chunk-size: 200
      max-chunk-size: 1000
      similarity-threshold: 0.75

  # ========== æ­¥éª¤4ï¸âƒ£ Embeddingé…ç½® (å‘é‡åŒ–) ==========
  # ä½œç”¨ï¼šæ–‡æœ¬è½¬å‘é‡ï¼ˆå¯é€‰ï¼‰
  embedding:
    # ONNX æœ¬åœ°å‘é‡åŒ–æœåŠ¡ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰
    onnx:
      # æ˜¯å¦å¯ç”¨ ONNX Embedding æœåŠ¡
      enabled: false  # ç¦ç”¨ï¼Œå› ä¸ºæ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨

      # â­ ä½¿ç”¨å…±äº«æ¨¡å‹è·¯å¾„ï¼ˆä¸ppl.onnx.model-pathä¿æŒä¸€è‡´ï¼‰
      # ç³»ç»Ÿä¼šè‡ªåŠ¨å¤ç”¨å·²åŠ è½½çš„æ¨¡å‹ï¼Œé¿å…é‡å¤åŠ è½½
      model-path: ${omni-agent.onnx.shared-model.model-path}

      # æœ€å¤§åºåˆ—é•¿åº¦
      # bge-base-zh-v1.5: 512
      # bge-m3: 8192
      max-sequence-length: ${omni-agent.onnx.shared-model.max-sequence-length}

      # æ‰¹å¤„ç†å¤§å°ï¼ˆæ‰¹é‡å‘é‡åŒ–æ—¶ä½¿ç”¨ï¼‰
      batch-size: 32
  # ========== æ­¥éª¤5ï¸âƒ£ RAGé…ç½® (Retrieval) ==========
  # ä½œç”¨ï¼šæ–‡æœ¬/å‘é‡æ£€ç´¢å’Œç´¢å¼•
  # æ”¯æŒå¤šç§åç«¯ï¼šfile, h2, sqlite, redis, mongodb, elasticsearch
  rag:
    # ========== å½“å‰ä½¿ç”¨çš„åç«¯ç±»å‹ ==========
    type: file

    # ========== File é…ç½®ï¼ˆåŸºäº Luceneï¼‰==========
    file:
      index-path: ./data/rag-index      # Luceneç´¢å¼•ç›®å½•
      analyzer: smartcn                 # åˆ†è¯å™¨ï¼šsmartcn(ä¸­æ–‡), standard(è‹±æ–‡)
      max-results: 100                  # æœ€å¤§è¿”å›ç»“æœæ•°
      similarity-threshold: 0.7         # ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0.0-1.0ï¼‰

    # ========== H2 é…ç½®ï¼ˆå†…å­˜/æ–‡ä»¶æ•°æ®åº“ï¼‰==========
    # type: h2
    h2:
      db-path: ./data/rag-h2
      mode: file                        # file æˆ– memory
      vector-dimension: 768             # å‘é‡ç»´åº¦
      similarity-metric: cosine         # ç›¸ä¼¼åº¦åº¦é‡ï¼šcosine, euclidean, dot

    # ========== SQLite é…ç½®ï¼ˆè½»é‡çº§ï¼‰==========
    # type: sqlite
    sqlite:
      db-path: ./data/rag-sqlite.db
      vector-dimension: 768
      similarity-metric: cosine

    # ========== Redis é…ç½®ï¼ˆé«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ï¼‰==========
    # type: redis
    redis:
      host: localhost
      port: 6379
      database: 2                       # ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“
      key-prefix: "rag:"
      vector-dimension: 768

    # ========== MongoDB é…ç½®ï¼ˆæ–‡æ¡£æ•°æ®åº“ + å‘é‡æœç´¢ï¼‰==========
    # type: mongodb
    mongodb:
      uri: mongodb://localhost:27017
      database: omni-agent-rag
      collection: vectors               # å‘é‡é›†åˆ
      index-name: vector_index          # å‘é‡ç´¢å¼•åç§°

    # ========== Elasticsearch é…ç½®ï¼ˆå…¨æ–‡æœç´¢ + å‘é‡æœç´¢ï¼‰==========
    # type: elasticsearch
    elasticsearch:
      hosts:
        - localhost:9200
      index-name: omni-agent-rag        # ç´¢å¼•åç§°
      vector-dimension: 768
      similarity: cosine                # ç›¸ä¼¼åº¦ç®—æ³•
      shard-count: 1                    # åˆ†ç‰‡æ•°
      replica-count: 0                  # å‰¯æœ¬æ•°

  # ========== æ­¥éª¤6ï¸âƒ£ AIæœåŠ¡é…ç½® (AI Service) ==========
  # ä½œç”¨ï¼šæ™ºèƒ½å¯¹è¯å’Œç”Ÿæˆ
  # ========== ğŸ“š AIè°ƒç”¨å½’æ¡£é…ç½® â­ NEW ==========
  # ä½œç”¨ï¼šè®°å½•æ¯æ¬¡AIè°ƒç”¨çš„å®Œæ•´ä¿¡æ¯ï¼Œç”¨äºçŸ¥è¯†ç½‘ç»œå­¦ä¹ 
  # ä½ç½®ï¼šè‡ªåŠ¨æ‹¦æˆªæ‰€æœ‰AIè°ƒç”¨ï¼Œå¼‚æ­¥å½’æ¡£
  ai:
    archive:
      enabled: true                      # å¯ç”¨AIè°ƒç”¨å½’æ¡£
      storage-path: data/ai-archives     # å½’æ¡£å­˜å‚¨è·¯å¾„
      enable-memory-index: true          # å¯ç”¨å†…å­˜ç´¢å¼•ï¼ˆå¿«é€ŸæŸ¥è¯¢ï¼‰
      max-memory-index: 1000             # å†…å­˜ç´¢å¼•æœ€å¤§æ•°é‡
      auto-clean-days: 30                # è‡ªåŠ¨æ¸…ç†30å¤©å‰çš„å½’æ¡£ï¼ˆ0=ä¸æ¸…ç†ï¼‰
      thread-pool:
        core-size: 2                     # å½’æ¡£çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°
        max-size: 5                      # å½’æ¡£çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°
        queue-capacity: 1000             # å½’æ¡£é˜Ÿåˆ—å®¹é‡
    # type: ollama  # æœ¬åœ°Ollamaï¼ˆå¼€å‘/æµ‹è¯•ï¼‰
    type: online-api    # åœ¨çº¿APIï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰

    # Ollama æœ¬åœ°é…ç½®ï¼ˆå¼€å‘/æµ‹è¯•ç¯å¢ƒï¼‰
    ollama:
      base-url: http://localhost:11434
      model: qwen2.5:latest
      temperature: 0.7
      max-tokens: 2000
      timeout: 30000  # 30ç§’

    # Online API é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰â­
    online:
      # APIæä¾›å•†: qianwen(åƒé—®), openai, claude, zhipu(æ™ºè°±), deepseek
      provider: deepseek

      endpoint: https://api.deepseek.com/v1/chat/completions
      # APIåŸºç¡€URLï¼ˆä¼šè‡ªåŠ¨æ‹¼æ¥ /chat/completionsï¼‰
      #      base-url: https://api.deepseek.com/v1

      # API Keyï¼ˆä»é˜¿é‡Œäº‘DashScopeè·å–ï¼‰
      # è·å–åœ°å€: https://dashscope.console.aliyun.com/
      api-key: ${AI_API_KEY:your-api-key-here}

      # æ¨¡å‹é€‰æ‹©
      # qwen-plus: å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ï¼ˆæ¨èï¼‰
      # qwen-turbo: å¿«é€Ÿå“åº”
      # qwen-max: æœ€å¼ºæ€§èƒ½
      # qwen-vl-plus: å›¾åƒç†è§£èƒ½åŠ›
      default-model: deepseek-chat

      # ç”Ÿæˆå‚æ•°
      temperature: 0.7      # 0.0-2.0ï¼Œæ§åˆ¶éšæœºæ€§
      max-tokens: 2048      # æœ€å¤§ç”Ÿæˆtokenæ•°
      top-p: 0.9           # æ ¸é‡‡æ ·å‚æ•°
      timeout: 60000       # 60ç§’è¶…æ—¶
      max-retries: 3       # æœ€å¤§é‡è¯•æ¬¡æ•°
      stream-enabled: true # å¯ç”¨æµå¼å“åº”

  # ========== çº¿ç¨‹æ± é…ç½®ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰â­ ==========
  thread-pool:
    # Vision LLM å¤„ç†çº¿ç¨‹æ± 
    vision-llm:
      core-pool-size: 2           # æ ¸å¿ƒçº¿ç¨‹æ•°
      max-pool-size: 4            # æœ€å¤§çº¿ç¨‹æ•°
      queue-capacity: 100         # é˜Ÿåˆ—å®¹é‡
      keep-alive-seconds: 60      # ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´
      thread-name-prefix: "vision-llm-"
      allow-core-thread-timeout: true
      wait-for-tasks-to-complete-on-shutdown: true
      await-termination-seconds: 60

    # æ–‡ä»¶ç›‘å¬å™¨çº¿ç¨‹æ± 
    file-watcher:
      core-pool-size: 1           # æ ¸å¿ƒçº¿ç¨‹æ•°
      max-pool-size: 2            # æœ€å¤§çº¿ç¨‹æ•°
      queue-capacity: 50          # é˜Ÿåˆ—å®¹é‡
      keep-alive-seconds: 300     # ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ï¼ˆ5åˆ†é’Ÿï¼‰
      thread-name-prefix: "file-watcher-"
      allow-core-thread-timeout: true
      wait-for-tasks-to-complete-on-shutdown: true
      await-termination-seconds: 30

  # ========== æ–‡ä»¶ç›‘å¬å™¨é…ç½® â­ ==========
  # ğŸ“ ç›‘å¬ data/documents ç›®å½•ï¼ˆåŸå§‹æ–‡ä»¶ä¸­è½¬ç«™ï¼‰
  # å½“æ–°æ–‡ä»¶ä¸Šä¼ åˆ°æ­¤ç›®å½•æ—¶ï¼Œè‡ªåŠ¨è§¦å‘å¤„ç†æµç¨‹ï¼Œå¤„ç†ç»“æœå­˜å‚¨åˆ° data/storage
  file-watcher:
    enabled: true                       # å¯ç”¨æ–‡ä»¶ç›‘å¬
    watch-directory: ./data/documents   # ç›‘å¬ç›®å½•ï¼ˆåŸå§‹æ–‡ä»¶ä¸­è½¬ç«™ï¼Œä»…å­˜å‚¨ä¸Šä¼ çš„åŸå§‹æ–‡ä»¶ï¼‰
    auto-index: true                    # è‡ªåŠ¨ç´¢å¼•
    scan-interval: 30000                # æ‰«æé—´éš”ï¼ˆæ¯«ç§’ï¼‰

  # ========== å½’æ¡£æ¸…ç†ä»»åŠ¡é…ç½® â­ NEW ==========
  archive:
    cleanup:
      enabled: true                      # å¯ç”¨å®šæ—¶æ¸…ç†ä»»åŠ¡
      cron: "0 0 2 * * ?"               # æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
      retention-days: 7                  # ä¿ç•™å¤©æ•°ï¼ˆè¶…è¿‡æ­¤å¤©æ•°çš„å¤±è´¥å½’æ¡£æ–‡ä»¶å°†è¢«å¤„ç†ï¼‰

  # ========== å·¥ä½œæµå¼•æ“é…ç½® â­ NEW ==========
  workflow:
    # å­˜å‚¨ç±»å‹ï¼šsqliteï¼ˆæ¨èï¼‰| file | mongodb | elasticsearch | autoï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
    # æ³¨æ„ï¼šauto æ¨¡å¼ä¼šè‡ªåŠ¨æ£€æµ‹ä¾èµ–ï¼Œå¯èƒ½é€‰æ‹©éé¢„æœŸçš„å­˜å‚¨ç±»å‹
    storage-type: sqlite

    # SQLite é…ç½®
    sqlite:
      db-path: ./data/workflows/workflows.db
      pool:
        max-size: 10
        min-idle: 2

    # å·¥ä½œæµå¸‚åœº
    market:
      enabled: true
      page-size: 20
      max-file-size: 10485760  # 10MB
      cache:
        enabled: true
        ttl: 300  # 5åˆ†é’Ÿ

# ========== æ—¥å¿—é…ç½® ==========
logging:
  level:
    top.yumbo.ai: DEBUG  # å¯ç”¨æ‰€æœ‰ debug æ—¥å¿—
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
