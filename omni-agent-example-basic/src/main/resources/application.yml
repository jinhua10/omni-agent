server:
  port: 8080

spring:
  application:
    name: omni-agent-example-basic

  # æ–‡ä»¶ä¸Šä¼ é…ç½® (File Upload Configuration)
  servlet:
    multipart:
      enabled: true
      max-file-size: 100MB      # å•ä¸ªæ–‡ä»¶æœ€å¤§100MB
      max-request-size: 100MB   # æ•´ä¸ªè¯·æ±‚æœ€å¤§100MB
      file-size-threshold: 2KB  # æ–‡ä»¶å†™å…¥ç£ç›˜çš„é˜ˆå€¼

# ========================================
# OmniAgent æ–‡æ¡£å¤„ç†æµç¨‹é…ç½®
# ========================================
# ğŸ“„ æ–‡æ¡£å¤„ç†æµç¨‹ï¼ˆ6ä¸ªæ­¥éª¤ï¼‰ï¼š
#
# æ­¥éª¤1ï¸âƒ£ æ–‡æ¡£å­˜å‚¨ (Document Storage)
#   â†“ ä¸Šä¼ æ–‡æ¡£åˆ°å­˜å‚¨æœåŠ¡ï¼Œä¿å­˜åŸå§‹æ–‡ä»¶
#
# æ­¥éª¤2ï¸âƒ£ æ–‡æœ¬æå– (Text Extraction / Vision LLM)
#   â†“ ä»PDF/å›¾ç‰‡ç­‰æ–‡ä»¶ä¸­æå–æ–‡æœ¬å†…å®¹
#
# æ­¥éª¤3ï¸âƒ£ æ™ºèƒ½åˆ†å— (Chunking Strategy)
#   â†“ å°†é•¿æ–‡æœ¬åˆ†å‰²æˆåˆé€‚çš„å—
#
# æ­¥éª¤4ï¸âƒ£ å‘é‡åŒ– (Embedding)
#   â†“ å°†æ–‡æœ¬å—è½¬æ¢ä¸ºå‘é‡ï¼ˆå¯é€‰ï¼‰
#
# æ­¥éª¤5ï¸âƒ£ RAGç´¢å¼• (RAG Service)
#   â†“ å­˜å‚¨æ–‡æœ¬å—å’Œå‘é‡ï¼Œå»ºç«‹æ£€ç´¢ç´¢å¼•
#
# æ­¥éª¤6ï¸âƒ£ AIå¯¹è¯ (AI Service)
#   â†“ ä½¿ç”¨æ£€ç´¢ç»“æœè¿›è¡Œæ™ºèƒ½å¯¹è¯
# ========================================
# ========== OmniAgent æ ¸å¿ƒé…ç½®ï¼ˆæŒ‰å¤„ç†æµç¨‹é¡ºåºï¼‰==========
omni-agent:

  # ========== æ­¥éª¤1ï¸âƒ£ æ–‡æ¡£å­˜å‚¨é…ç½® (Document Storage) ==========
  # ä½œç”¨ï¼šå­˜å‚¨ä¸Šä¼ çš„åŸå§‹æ–‡ä»¶å’Œæå–çš„æ–‡æœ¬
  # ä½ç½®ï¼šæ–‡æ¡£å¤„ç†æµç¨‹çš„ç¬¬1æ­¥ - æ–‡æ¡£ä¸Šä¼ å’Œå½’æ¡£
  # æ”¯æŒå¤šç§åç«¯ï¼šfile, minio, s3, redis, mongodb, elasticsearch
  document-storage:
    # ========== å½“å‰ä½¿ç”¨çš„åç«¯ç±»å‹ ==========
    type: file

    # ========== File é…ç½®ï¼ˆæ¨èï¼šç®€å•ã€ç›´æ¥ï¼‰==========
    file:
      base-path: ./data/documents       # æ–‡æ¡£å­˜å‚¨æ ¹ç›®å½•
      chunk-path: ./data/chunks         # åˆ†å—å­˜å‚¨ç›®å½•
      image-path: ./data/images         # å›¾ç‰‡å­˜å‚¨ç›®å½•
      ppl-path: ./data/ppl              # PPLæ•°æ®å­˜å‚¨ç›®å½•
      max-file-size: 104857600          # æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆ100MBï¼‰

    # ========== MinIO é…ç½®ï¼ˆå¯¹è±¡å­˜å‚¨ã€æ¨èç”Ÿäº§ç¯å¢ƒï¼‰==========
    # type: minio
    minio:
      endpoint: http://localhost:9000   # MinIOæœåŠ¡åœ°å€
      access-key: minioadmin            # è®¿é—®å¯†é’¥
      secret-key: minioadmin            # å¯†é’¥
      bucket: omni-agent                # å­˜å‚¨æ¡¶åç§°
      auto-create-bucket: true          # è‡ªåŠ¨åˆ›å»ºå­˜å‚¨æ¡¶

    # ========== AWS S3 é…ç½®ï¼ˆäº‘å­˜å‚¨ï¼‰==========
    # type: s3
    s3:
      region: us-east-1                 # AWSåŒºåŸŸ
      access-key: your-access-key       # AWSè®¿é—®å¯†é’¥
      secret-key: your-secret-key       # AWSå¯†é’¥
      bucket: omni-agent                # S3å­˜å‚¨æ¡¶åç§°
      endpoint:                         # è‡ªå®šä¹‰ç«¯ç‚¹ï¼ˆå¯é€‰ï¼Œç”¨äºå…¼å®¹S3çš„æœåŠ¡ï¼‰

    # ========== Redis é…ç½®ï¼ˆç¼“å­˜å¼å­˜å‚¨ï¼‰==========
    # type: redis
    redis:
      host: localhost
      port: 6379
      database: 1                       # ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“
      key-prefix: "docs:"                 # é”®å‰ç¼€

    # ========== MongoDB é…ç½®ï¼ˆæ–‡æ¡£æ•°æ®åº“ï¼‰==========
    # type: mongodb
    mongodb:
      uri: mongodb://localhost:27017
      database: omni-agent-docs
      collection: documents             # é›†åˆåç§°

    # ========== Elasticsearch é…ç½®ï¼ˆå…¨æ–‡ç´¢å¼•ï¼‰==========
    # type: elasticsearch
    elasticsearch:
      hosts:
        - localhost:9200
      index-name: omni-agent-docs       # ç´¢å¼•åç§°
  # ========== æŒä¹…åŒ–é…ç½® (Persistence) - ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ ==========
  # ä½œç”¨ï¼šå­˜å‚¨ç³»ç»Ÿé…ç½®ã€ä¼šè¯å†å²ç­‰å…ƒæ•°æ®
  # æ”¯æŒå¤šç§åç«¯ï¼šfile, sqlite, h2, memory, redis, mongodb, elasticsearch
  persistence:
    # ========== å½“å‰ä½¿ç”¨çš„åç«¯ç±»å‹ ==========
    type: sqlite

    # ========== File é…ç½®ï¼ˆæœ€ç®€å•ã€é›¶ä¾èµ–ï¼‰==========
    # type: file
    file:
      base-path: ./data/persistence     # æŒä¹…åŒ–æ•°æ®æ ¹ç›®å½•
      # FileæŒä¹…åŒ–å°†æ•°æ®ä»¥JSONæ ¼å¼å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­
      # ä¼˜ç‚¹ï¼šé›¶ä¾èµ–ã€æœ€ç®€å•ã€é€‚åˆå°è§„æ¨¡æ•°æ®
      # ç¼ºç‚¹ï¼šæ€§èƒ½è¾ƒä½ã€ä¸æ”¯æŒå¤æ‚æŸ¥è¯¢

    # ========== SQLite é…ç½®ï¼ˆæ¨èï¼šè½»é‡çº§ã€æ— éœ€é¢å¤–æœåŠ¡ï¼‰==========
    sqlite:
      db-path: ./data/omni-agent.db     # æ•°æ®åº“æ–‡ä»¶è·¯å¾„
      auto-create-tables: true          # è‡ªåŠ¨åˆ›å»ºè¡¨
      show-sql: false                   # æ˜¯å¦æ˜¾ç¤ºSQLè¯­å¥
      connection-timeout: 30000         # è¿æ¥è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰

    # ========== H2 é…ç½®ï¼ˆå¼€å‘/æµ‹è¯•ç¯å¢ƒï¼‰==========
    # type: h2
    h2:
      db-path: ./data/omni-agent-h2     # H2æ•°æ®åº“æ–‡ä»¶è·¯å¾„ï¼ˆæ— éœ€.mv.dbåç¼€ï¼‰
      mode: file                        # file: æ–‡ä»¶æ¨¡å¼, memory: å†…å­˜æ¨¡å¼
      auto-create-tables: true
      show-sql: false
      # å†…å­˜æ¨¡å¼ç¤ºä¾‹ï¼š
      # mode: memory
      # db-name: testdb

    # ========== Memory é…ç½®ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰==========
    # type: memory
    memory:
      # å†…å­˜æŒä¹…åŒ–æ— éœ€é¢å¤–é…ç½®ï¼Œæ•°æ®ä»…å­˜åœ¨äºå†…å­˜ä¸­
      # ä¼˜ç‚¹ï¼šé€Ÿåº¦æœ€å¿«
      # ç¼ºç‚¹ï¼šé‡å¯åæ•°æ®ä¸¢å¤±
      initial-capacity: 1000            # åˆå§‹å®¹é‡

    # ========== Redis é…ç½®ï¼ˆé«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ï¼‰==========
    # type: redis
    redis:
      host: localhost                   # RedisæœåŠ¡å™¨åœ°å€
      port: 6379                        # Redisç«¯å£
      password:                         # Rediså¯†ç ï¼ˆå¦‚æœæœ‰ï¼‰
      database: 0                       # ä½¿ç”¨çš„æ•°æ®åº“ç¼–å·
      timeout: 3000                     # è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      # è¿æ¥æ± é…ç½®
      pool:
        max-active: 8                   # æœ€å¤§è¿æ¥æ•°
        max-idle: 8                     # æœ€å¤§ç©ºé—²è¿æ¥
        min-idle: 0                     # æœ€å°ç©ºé—²è¿æ¥
        max-wait: -1                    # æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆ-1è¡¨ç¤ºæ— é™ï¼‰

    # ========== MongoDB é…ç½®ï¼ˆæ–‡æ¡£æ•°æ®åº“ï¼‰==========
    # type: mongodb
    mongodb:
      uri: mongodb://localhost:27017    # MongoDBè¿æ¥URI
      database: omni-agent              # æ•°æ®åº“åç§°
      # æˆ–ä½¿ç”¨è¯¦ç»†é…ç½®ï¼š
      # host: localhost
      # port: 27017
      # username: admin
      # password: password
      # database: omni-agent
      # auth-database: admin

    # ========== Elasticsearch é…ç½®ï¼ˆå…¨æ–‡æœç´¢ã€å¤§è§„æ¨¡ï¼‰==========
    # type: elasticsearch
    elasticsearch:
      hosts:
        - localhost:9200                # ESèŠ‚ç‚¹åœ°å€ï¼ˆæ”¯æŒå¤šä¸ªï¼‰
      username:                         # ç”¨æˆ·åï¼ˆå¦‚æœå¯ç”¨å®‰å…¨ï¼‰
      password:                         # å¯†ç 
      connection-timeout: 5000          # è¿æ¥è¶…æ—¶
      socket-timeout: 60000             # Socketè¶…æ—¶
      index-prefix: omni-agent          # ç´¢å¼•å‰ç¼€

  # ========== æ­¥éª¤2ï¸âƒ£ Vision LLMé…ç½® (æ–‡æœ¬æå–) ==========
  # ä½œç”¨ï¼šä»å›¾ç‰‡/PDF/officeæ–‡æ¡£ä¸­æå–æ–‡æœ¬
  vision-llm:
    # æ˜¯å¦å¯ç”¨å›¾ç‰‡æå–åŠŸèƒ½
    enabled: true

    # API é…ç½®
    api-key: ${QW_API_KEY:your-api-key-here}

    # æ¨¡å‹é€‰æ‹©ï¼ˆæ”¯æŒå¤šæ¨¡æ€è§†è§‰ç†è§£çš„æ¨¡å‹ï¼‰
    # - qwen-vl-plus: åƒé—®è§†è§‰ç†è§£å¢å¼ºç‰ˆï¼ˆæ¨èï¼Œä¸­æ–‡æ•ˆæœå¥½ï¼‰
    # - qwen-vl-max: åƒé—®è§†è§‰ç†è§£æ——èˆ°ç‰ˆ
    # - deepseek-vl: DeepSeek è§†è§‰ç†è§£
    # - gpt-4o: OpenAI GPT-4 with Vision
    # - gpt-4-vision-preview: OpenAI GPT-4 Vision
    model: qwen-vl-plus

    # API ç«¯ç‚¹
    # åƒé—® VL: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
    # DeepSeek VL: https://api.deepseek.com/v1/chat/completions
    # OpenAI: https://api.openai.com/v1/chat/completions
    endpoint: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions

    # ========== æ™ºèƒ½æ‰¹å¤„ç†é…ç½® â­ ==========
    # æ ¹æ®ä¸Šä¸‹æ–‡å¤§å°åŠ¨æ€å†³å®šæ¯æ‰¹å¤„ç†å¤šå°‘å¼ å¹»ç¯ç‰‡
    batch-processing:
      # æ˜¯å¦å¯ç”¨æ™ºèƒ½æ‰¹å¤„ç†ï¼ˆæ ¹æ®ä¸Šä¸‹æ–‡å¤§å°åŠ¨æ€åˆ†æ‰¹ï¼‰
      enabled: true

      # æœ€å¤§ä¸Šä¸‹æ–‡tokenæ•°ï¼ˆæ ¹æ®æ¨¡å‹é™åˆ¶è°ƒæ•´ï¼‰
      # qwen-vl-plus: 8000, qwen-vl-max: 32000, gpt-4o: 128000
      max-context-tokens: 8000

      # å•å¼ å¹»ç¯ç‰‡é¢„ä¼°tokenæ•°ï¼ˆç”¨äºé¢„åˆ¤æ–­ï¼‰
      # åŒ…æ‹¬ï¼šå›¾ç‰‡token + æ–‡å­—token + æç¤ºè¯token
      estimated-tokens-per-slide: 1500

      # é¢„ç•™tokenæ•°ï¼ˆç”¨äºç³»ç»Ÿæç¤ºè¯å’Œå“åº”ï¼‰
      reserved-tokens: 2000

      # æœ€å°æ‰¹æ¬¡å¤§å°ï¼ˆè‡³å°‘å¤„ç†å¤šå°‘å¼ ï¼‰
      min-batch-size: 1

      # æœ€å¤§æ‰¹æ¬¡å¤§å°ï¼ˆæœ€å¤šå¤„ç†å¤šå°‘å¼ ï¼‰
      max-batch-size: 5

    # ç³»ç»Ÿæç¤ºè¯ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
    system-prompt: |
      è¯·åˆ†æè¿™å¼ å›¾ç‰‡å¹¶æå–å…¶ä¸­çš„å…³é”®ä¿¡æ¯ã€‚
      å¦‚æœå›¾ç‰‡åŒ…å«æ–‡å­—ï¼Œè¯·å®Œæ•´å‡†ç¡®åœ°æå–æ‰€æœ‰æ–‡å­—å†…å®¹ã€‚
      å¦‚æœæ˜¯å›¾è¡¨æˆ–ç¤ºæ„å›¾ï¼Œè¯·æè¿°å…¶ä¸»è¦å†…å®¹å’Œå«ä¹‰ã€‚
      
      ã€é‡è¦ã€‘å¯¹äºåŒ…å«å¤šå¼ å›¾ç‰‡çš„å¹»ç¯ç‰‡ï¼š
      - è¿™äº›å›¾ç‰‡å¯èƒ½æ˜¯ä¸€ä¸ªå®Œæ•´å†…å®¹çš„ä¸åŒéƒ¨åˆ†ï¼ˆå¦‚æµç¨‹å›¾ã€æ¶æ„å›¾ã€éƒ¨ç½²å›¾ï¼‰
      - è¯·ç»¼åˆåˆ†ææ‰€æœ‰å›¾ç‰‡ï¼Œç†è§£å®ƒä»¬çš„æ•´ä½“å«ä¹‰å’Œå…³è”å…³ç³»
      - å›¾ç‰‡æŒ‰ç©ºé—´ä½ç½®æ’åˆ—ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼‰
      
      ä¿æŒè¾“å‡ºç®€æ´ï¼Œåªæå–æ ¸å¿ƒä¿¡æ¯ã€‚

  # ========== æ­¥éª¤3ï¸âƒ£ åˆ†å—ç­–ç•¥é…ç½® (Chunking) ==========
  # ä½œç”¨ï¼šæ™ºèƒ½æ–‡æœ¬åˆ†å—
  chunking:
    # é»˜è®¤ç­–ç•¥ï¼šautoï¼ˆè‡ªåŠ¨é€‰æ‹©ï¼‰ã€fixed_sizeï¼ˆå›ºå®šå¤§å°ï¼‰ã€semanticï¼ˆè¯­ä¹‰ï¼‰ã€pplï¼ˆå›°æƒ‘åº¦ï¼‰
    default-strategy: ppl
    # ========== PPL ONNX é…ç½®ï¼ˆç”¨äºæ­¥éª¤3ï¸âƒ£åˆ†å—ï¼‰ â­ ==========
    # PPL å›°æƒ‘åº¦åˆ†å—ç­–ç•¥é…ç½®
    ppl:
      # æ¨¡å¼é€‰æ‹©ï¼šsimplifiedï¼ˆç®€åŒ–ç‰ˆï¼Œå¿«é€Ÿï¼‰ã€onnxï¼ˆONNXç‰ˆï¼Œç²¾ç¡®ï¼‰ã€autoï¼ˆè‡ªåŠ¨é€‰æ‹©ï¼‰
      mode: onnx  # â­ ä½¿ç”¨ ONNX æ¨¡å¼

      # è‡ªåŠ¨æ¨¡å¼æ—¶æ˜¯å¦ä¼˜å…ˆç²¾åº¦ï¼ˆä¸ºtrueæ—¶ä¼šä¼˜å…ˆä½¿ç”¨ONNXï¼‰
      prefer-accuracy: true  # â­ ä¼˜å…ˆç²¾åº¦

      # åˆ†å—å¤§å°èŒƒå›´
      min-chunk-size: 200      # æœ€å°åˆ†å—å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰
      max-chunk-size: 800      # æœ€å¤§åˆ†å—å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰

      # å›°æƒ‘åº¦é˜ˆå€¼ï¼ˆ0.0-1.0ï¼Œå€¼è¶Šé«˜è¶Šä¸¥æ ¼ï¼‰
      threshold: 0.3
      onnx:
        # å¯ç”¨ ONNX PPL æœåŠ¡
        enabled: true

        # ONNX æ¨¡å‹è·¯å¾„ï¼ˆBGE-base-zhï¼‰
        model-path: ./models/bge-base-zh/model.onnx

        # Tokenizer è·¯å¾„
        tokenizer-path: ./models/bge-base-zh

        # ç¼“å­˜é…ç½®
        use-cache: true          # å¯ç”¨ç¼“å­˜
        cache-size: 1000         # ç¼“å­˜å¤§å°
        cache-ttl: 3600          # ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰

    # å›ºå®šå¤§å°åˆ†å—ç­–ç•¥é…ç½®ï¼ˆå¤‡ç”¨ï¼‰
    fixed-size:
      chunk-size: 500          # åˆ†å—å¤§å°
      overlap: 50              # é‡å å¤§å°

    # è¯­ä¹‰åˆ†å—ç­–ç•¥é…ç½®ï¼ˆå¤‡ç”¨ï¼‰
    semantic:
      min-chunk-size: 200
      max-chunk-size: 1000
      similarity-threshold: 0.75

  # ========== æ­¥éª¤4ï¸âƒ£ Embeddingé…ç½® (å‘é‡åŒ–) ==========
  # ä½œç”¨ï¼šæ–‡æœ¬è½¬å‘é‡ï¼ˆå¯é€‰ï¼‰
  embedding:
    # ONNX æœ¬åœ°å‘é‡åŒ–æœåŠ¡ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰
    onnx:
      # æ˜¯å¦å¯ç”¨ ONNX Embedding æœåŠ¡
      enabled: false

      # ONNX æ¨¡å‹æ–‡ä»¶è·¯å¾„
      # æ¨èæ¨¡å‹ï¼š
      # - bge-base-zh-v1.5 (ä¸­æ–‡ï¼Œ768ç»´ï¼Œ~400MB) - æ¨è
      # - bge-m3 (å¤šè¯­è¨€ï¼Œ1024ç»´ï¼Œ~2GB)
      # - bge-large-zh (ä¸­æ–‡ï¼Œ1024ç»´ï¼Œ~1.3GB)
      # - text2vec-base-chinese (ä¸­æ–‡ï¼Œ768ç»´ï¼Œ~400MB)
      #
      # æ¨¡å‹ä¸‹è½½ï¼š
      # æ–¹å¼1: huggingface-cli download BAAI/bge-base-zh-v1.5 --local-dir ./models/bge-base-zh-v1.5
      # æ–¹å¼2: git clone https://www.modelscope.cn/BAAI/bge-base-zh-v1.5.git ./models/bge-base-zh-v1.5
      model-path: ./models/bge-base-zh-v1.5/model.onnx

      # æœ€å¤§åºåˆ—é•¿åº¦
      # bge-base-zh-v1.5: 512
      # bge-m3: 8192
      max-sequence-length: 512

      # æ‰¹å¤„ç†å¤§å°ï¼ˆæ‰¹é‡å‘é‡åŒ–æ—¶ä½¿ç”¨ï¼‰
      batch-size: 32
  # ========== æ­¥éª¤5ï¸âƒ£ RAGé…ç½® (Retrieval) ==========
  # ä½œç”¨ï¼šæ–‡æœ¬/å‘é‡æ£€ç´¢å’Œç´¢å¼•
  # æ”¯æŒå¤šç§åç«¯ï¼šfile, h2, sqlite, redis, mongodb, elasticsearch
  rag:
    # ========== å½“å‰ä½¿ç”¨çš„åç«¯ç±»å‹ ==========
    type: file

    # ========== File é…ç½®ï¼ˆåŸºäº Luceneï¼‰==========
    file:
      index-path: ./data/rag-index      # Luceneç´¢å¼•ç›®å½•
      analyzer: smartcn                 # åˆ†è¯å™¨ï¼šsmartcn(ä¸­æ–‡), standard(è‹±æ–‡)
      max-results: 100                  # æœ€å¤§è¿”å›ç»“æœæ•°
      similarity-threshold: 0.7         # ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0.0-1.0ï¼‰

    # ========== H2 é…ç½®ï¼ˆå†…å­˜/æ–‡ä»¶æ•°æ®åº“ï¼‰==========
    # type: h2
    h2:
      db-path: ./data/rag-h2
      mode: file                        # file æˆ– memory
      vector-dimension: 768             # å‘é‡ç»´åº¦
      similarity-metric: cosine         # ç›¸ä¼¼åº¦åº¦é‡ï¼šcosine, euclidean, dot

    # ========== SQLite é…ç½®ï¼ˆè½»é‡çº§ï¼‰==========
    # type: sqlite
    sqlite:
      db-path: ./data/rag-sqlite.db
      vector-dimension: 768
      similarity-metric: cosine

    # ========== Redis é…ç½®ï¼ˆé«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ï¼‰==========
    # type: redis
    redis:
      host: localhost
      port: 6379
      database: 2                       # ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“
      key-prefix: "rag:"
      vector-dimension: 768

    # ========== MongoDB é…ç½®ï¼ˆæ–‡æ¡£æ•°æ®åº“ + å‘é‡æœç´¢ï¼‰==========
    # type: mongodb
    mongodb:
      uri: mongodb://localhost:27017
      database: omni-agent-rag
      collection: vectors               # å‘é‡é›†åˆ
      index-name: vector_index          # å‘é‡ç´¢å¼•åç§°

    # ========== Elasticsearch é…ç½®ï¼ˆå…¨æ–‡æœç´¢ + å‘é‡æœç´¢ï¼‰==========
    # type: elasticsearch
    elasticsearch:
      hosts:
        - localhost:9200
      index-name: omni-agent-rag        # ç´¢å¼•åç§°
      vector-dimension: 768
      similarity: cosine                # ç›¸ä¼¼åº¦ç®—æ³•
      shard-count: 1                    # åˆ†ç‰‡æ•°
      replica-count: 0                  # å‰¯æœ¬æ•°

  # ========== æ­¥éª¤6ï¸âƒ£ AIæœåŠ¡é…ç½® (AI Service) ==========
  # ä½œç”¨ï¼šæ™ºèƒ½å¯¹è¯å’Œç”Ÿæˆ
  ai:
    # type: ollama  # æœ¬åœ°Ollamaï¼ˆå¼€å‘/æµ‹è¯•ï¼‰
    type: online-api    # åœ¨çº¿APIï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰

    # Ollama æœ¬åœ°é…ç½®ï¼ˆå¼€å‘/æµ‹è¯•ç¯å¢ƒï¼‰
    ollama:
      base-url: http://localhost:11434
      model: qwen2.5:latest
      temperature: 0.7
      max-tokens: 2000
      timeout: 30000  # 30ç§’

    # Online API é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰â­
    online:
      # APIæä¾›å•†: qianwen(åƒé—®), openai, claude, zhipu(æ™ºè°±), deepseek
      provider: deepseek

      endpoint: https://api.deepseek.com/v1/chat/completions
      # APIåŸºç¡€URLï¼ˆä¼šè‡ªåŠ¨æ‹¼æ¥ /chat/completionsï¼‰
      #      base-url: https://api.deepseek.com/v1

      # API Keyï¼ˆä»é˜¿é‡Œäº‘DashScopeè·å–ï¼‰
      # è·å–åœ°å€: https://dashscope.console.aliyun.com/
      api-key: ${AI_API_KEY:your-api-key-here}

      # æ¨¡å‹é€‰æ‹©
      # qwen-plus: å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ï¼ˆæ¨èï¼‰
      # qwen-turbo: å¿«é€Ÿå“åº”
      # qwen-max: æœ€å¼ºæ€§èƒ½
      # qwen-vl-plus: å›¾åƒç†è§£èƒ½åŠ›
      default-model: deepseek-chat

      # ç”Ÿæˆå‚æ•°
      temperature: 0.7      # 0.0-2.0ï¼Œæ§åˆ¶éšæœºæ€§
      max-tokens: 2048      # æœ€å¤§ç”Ÿæˆtokenæ•°
      top-p: 0.9           # æ ¸é‡‡æ ·å‚æ•°
      timeout: 60000       # 60ç§’è¶…æ—¶
      max-retries: 3       # æœ€å¤§é‡è¯•æ¬¡æ•°
      stream-enabled: true # å¯ç”¨æµå¼å“åº”

  # ========== çº¿ç¨‹æ± é…ç½®ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰â­ ==========
  thread-pool:
    # Vision LLM å¤„ç†çº¿ç¨‹æ± 
    vision-llm:
      core-pool-size: 2           # æ ¸å¿ƒçº¿ç¨‹æ•°
      max-pool-size: 4            # æœ€å¤§çº¿ç¨‹æ•°
      queue-capacity: 100         # é˜Ÿåˆ—å®¹é‡
      keep-alive-seconds: 60      # ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´
      thread-name-prefix: "vision-llm-"
      allow-core-thread-timeout: true
      wait-for-tasks-to-complete-on-shutdown: true
      await-termination-seconds: 60

    # æ–‡ä»¶ç›‘å¬å™¨çº¿ç¨‹æ± 
    file-watcher:
      core-pool-size: 1           # æ ¸å¿ƒçº¿ç¨‹æ•°
      max-pool-size: 2            # æœ€å¤§çº¿ç¨‹æ•°
      queue-capacity: 50          # é˜Ÿåˆ—å®¹é‡
      keep-alive-seconds: 300     # ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ï¼ˆ5åˆ†é’Ÿï¼‰
      thread-name-prefix: "file-watcher-"
      allow-core-thread-timeout: true
      wait-for-tasks-to-complete-on-shutdown: true
      await-termination-seconds: 30

  # ========== æ–‡ä»¶ç›‘å¬å™¨é…ç½® â­ ==========
  file-watcher:
    enabled: true                       # å¯ç”¨æ–‡ä»¶ç›‘å¬
    watch-directory: ./data/documents   # ç›‘å¬ç›®å½•ï¼ˆä¸Šä¼ æ–‡ä»¶ä¼šä¿å­˜åˆ°è¿™é‡Œï¼‰
    auto-index: true                    # è‡ªåŠ¨ç´¢å¼•
    scan-interval: 30000                # æ‰«æé—´éš”ï¼ˆæ¯«ç§’ï¼‰

  # ========== å½’æ¡£æ¸…ç†ä»»åŠ¡é…ç½® â­ NEW ==========
  archive:
    cleanup:
      enabled: true                      # å¯ç”¨å®šæ—¶æ¸…ç†ä»»åŠ¡
      cron: "0 0 2 * * ?"               # æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
      retention-days: 7                  # ä¿ç•™å¤©æ•°ï¼ˆè¶…è¿‡æ­¤å¤©æ•°çš„å¤±è´¥å½’æ¡£æ–‡ä»¶å°†è¢«å¤„ç†ï¼‰

  # ========== å·¥ä½œæµå¼•æ“é…ç½® â­ NEW ==========
  workflow:
    # å­˜å‚¨ç±»å‹ï¼šautoï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰| file | sqlite | mongodb | elasticsearch
    storage-type: auto

    # SQLite é…ç½®
    sqlite:
      db-path: ./data/workflows/workflows.db
      pool:
        max-size: 10
        min-idle: 2

    # å·¥ä½œæµå¸‚åœº
    market:
      enabled: true
      page-size: 20
      max-file-size: 10485760  # 10MB
      cache:
        enabled: true
        ttl: 300  # 5åˆ†é’Ÿ

# ========== æ—¥å¿—é…ç½® ==========
logging:
  level:
    top.yumbo.ai: DEBUG  # å¯ç”¨æ‰€æœ‰ debug æ—¥å¿—
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
