# ğŸ“‹ æµç¨‹è§†å›¾æ–‡æ¡£ç”Ÿå‘½å‘¨æœŸç®¡ç†

> **å®ç°æ—¶é—´**: 2025å¹´12æœˆ26æ—¥  
> **åŠŸèƒ½**: æ–‡æ¡£åœ¨æµç¨‹è§†å›¾ä¸­çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†  
> **çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

å®ç°äº†æ–‡æ¡£åœ¨å¤„ç†æµç¨‹è§†å›¾ä¸­çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬ï¼š

1. **å¤„ç†å®Œæˆåè‡ªåŠ¨ç§»é™¤** - ç´¢å¼•å­˜å‚¨å®Œæˆåï¼Œæ–‡æ¡£ä»æµç¨‹è§†å›¾ä¸­è‡ªåŠ¨æ¶ˆå¤±
2. **é‡æ–°åŠ å…¥æµç¨‹** - å·²å®Œæˆçš„æ–‡æ¡£å¯ä»¥ä»æµè§ˆå™¨è§†å›¾é‡æ–°åŠ å…¥åˆ°æµç¨‹è§†å›¾
3. **è™šæ‹Ÿè·¯å¾„æ”¯æŒ** - åŸºäºå­˜å‚¨æœåŠ¡çš„è™šæ‹Ÿè·¯å¾„ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯

---

## ğŸ”„ æ–‡æ¡£ç”Ÿå‘½å‘¨æœŸ

### é˜¶æ®µ1: ä¸Šä¼ ä¸åˆå§‹å¤„ç†

```
ç”¨æˆ·ä¸Šä¼ æ–‡æ¡£
    â†“
ä¿å­˜åˆ°ç›‘å¬ç›®å½• (data/documents)
    â†“
è§¦å‘è‡ªåŠ¨å¤„ç†æµç¨‹
    â†“
æ˜¾ç¤ºåœ¨æµç¨‹è§†å›¾çš„å¾…å¤„ç†åˆ—è¡¨
```

### é˜¶æ®µ2: å¤„ç†æµç¨‹

```
UPLOAD (0%) â†’ æ–‡æ¡£ä¸Šä¼ 
    â†“
EXTRACT (20%) â†’ æ–‡æœ¬æå–
    â†“
CHUNK (40%) â†’ æ™ºèƒ½åˆ†å—
    â†“
VECTORIZE (60%) â†’ å‘é‡åŒ–
    â†“
INDEX (80%) â†’ ç´¢å¼•å­˜å‚¨
    â†“
COMPLETED (100%) â†’ å¤„ç†å®Œæˆ
```

### é˜¶æ®µ3: å®Œæˆä¸å½’æ¡£

```
å¤„ç†å®Œæˆ (COMPLETED)
    â†“
æ–‡æ¡£ä» data/documents ç§»åŠ¨åˆ° data/storage/documents
    â†“
ä»æµç¨‹è§†å›¾çš„å¾…å¤„ç†åˆ—è¡¨ä¸­ç§»é™¤ â­
    â†“
å¯åœ¨æµè§ˆå™¨è§†å›¾ä¸­æŸ¥çœ‹
```

### é˜¶æ®µ4: é‡æ–°å¤„ç†ï¼ˆå¯é€‰ï¼‰

```
åœ¨æµè§ˆå™¨è§†å›¾ä¸­æ‰¾åˆ°æ–‡æ¡£
    â†“
ç‚¹å‡»"åŠ å…¥æµç¨‹è§†å›¾"æŒ‰é’® â­
    â†“
ä» storage è¯»å–æ–‡æ¡£æ•°æ®ï¼ˆè™šæ‹Ÿè·¯å¾„ï¼‰
    â†“
å†™å…¥åˆ° data/documents ä¸´æ—¶ç›®å½•
    â†“
é‡æ–°æ˜¾ç¤ºåœ¨æµç¨‹è§†å›¾ä¸­
    â†“
å¯ä»¥é‡æ–°é…ç½®å¹¶å¤„ç†
```

---

## ğŸ› ï¸ å®ç°ç»†èŠ‚

### 1. å‰ç«¯ - æµç¨‹è§†å›¾è‡ªåŠ¨åˆ·æ–°

**æ–‡ä»¶**: `UI/src/components/rag-flow/DocumentProcessingFlow.jsx`

#### ä¿®æ”¹ç‚¹1: è¿‡æ»¤å·²å®Œæˆæ–‡æ¡£

```javascript
// åŠ è½½æ–‡æ¡£åˆ—è¡¨ - åªæ˜¾ç¤ºæœªå®Œæˆçš„æ–‡æ¡£
const loadDocumentsList = useCallback(async () => {
    setLoading(true);
    try {
        const response = await fetch('/api/system/rag-config/documents-status');
        const result = await response.json();
        if (result.success) {
            // â­ åªæ˜¾ç¤ºæœªå®Œæˆçš„æ–‡æ¡£ï¼ˆæ’é™¤COMPLETEDçŠ¶æ€ï¼‰
            const docs = Object.values(result.data).filter(doc => doc.status !== 'COMPLETED');
            setDocumentsList(docs);
            console.log('ğŸ“‹ åŠ è½½æ–‡æ¡£åˆ—è¡¨:', docs.length, 'ä¸ªå¾…å¤„ç†æ–‡æ¡£');
        }
    } catch (error) {
        console.error('åŠ è½½æ–‡æ¡£åˆ—è¡¨å¤±è´¥:', error);
    } finally {
        setLoading(false);
    }
}, []);
```

#### ä¿®æ”¹ç‚¹2: å¤„ç†å®Œæˆæ—¶è‡ªåŠ¨åˆ·æ–°

```javascript
// å¤„ç† WebSocket æ¶ˆæ¯
const handleMessage = useCallback((message) => {
    if (message.type === 'progress') {
        setProgress(message.data);

        // â­ å¦‚æœå®Œæˆï¼Œåˆ·æ–°æ–‡æ¡£åˆ—è¡¨ï¼ˆç§»é™¤å·²å®Œæˆæ–‡æ¡£ï¼‰
        if (message.data.status === 'COMPLETED') {
            console.log('âœ… æ–‡æ¡£å¤„ç†å®Œæˆï¼Œåˆ·æ–°åˆ—è¡¨ç§»é™¤è¯¥æ–‡æ¡£:', message.data.documentId);
            // å»¶è¿Ÿåˆ·æ–°ï¼Œç¡®ä¿åç«¯çŠ¶æ€å·²æ›´æ–°
            setTimeout(() => {
                loadDocumentsList();
            }, 1000);
            
            if (onComplete) {
                onComplete(message.data);
            }
        }
        // ...
    }
}, [onComplete, onError, loadDocumentsList, t]);
```

**æ•ˆæœ**:
- âœ… æ–‡æ¡£å¤„ç†å®Œæˆåï¼Œ1ç§’åè‡ªåŠ¨ä»å¾…å¤„ç†åˆ—è¡¨ä¸­æ¶ˆå¤±
- âœ… åˆ—è¡¨åªæ˜¾ç¤ºå¾…å¤„ç†å’Œå¤„ç†ä¸­çš„æ–‡æ¡£
- âœ… å·²å®Œæˆçš„æ–‡æ¡£ä¸å†å ç”¨è§†å›¾ç©ºé—´

---

### 2. å‰ç«¯ - æµè§ˆå™¨è§†å›¾æ·»åŠ æŒ‰é’®

**æ–‡ä»¶**: `UI/src/components/document/DocumentBrowser.jsx`

#### ä¿®æ”¹ç‚¹1: æ·»åŠ æŒ‰é’®åˆ°æ“ä½œæ 

```javascript
<Tooltip title={t('document.browse.addToFlowView')}>
  <Button
    type="text"
    size="small"
    icon={<SyncOutlined />}
    onClick={(e) => {
      e.stopPropagation()
      handleAddToFlowView(record)
    }}
  />
</Tooltip>
```

#### ä¿®æ”¹ç‚¹2: å®ç°å¤„ç†å‡½æ•°

```javascript
/**
 * åŠ å…¥æµç¨‹è§†å›¾ / Add to flow view
 * 
 * å°†æ–‡æ¡£ä»å­˜å‚¨ç›®å½•å¤åˆ¶åˆ°ä¸´æ—¶ç›®å½•ï¼Œå¹¶è·³è½¬åˆ°æµç¨‹è§†å›¾
 */
const handleAddToFlowView = useCallback(async (item) => {
  try {
    antdMessage.loading({ content: t('document.browse.addingToFlow'), key: 'addToFlow' })
    
    // è°ƒç”¨åç«¯APIï¼šä»storageè¯»å–å¹¶å†™å…¥åˆ°documentsä¸´æ—¶ç›®å½•
    const response = await axios.post('/api/documents/copy-to-pending', {
      path: item.path,
      fileName: item.name
    })

    if (response.data && response.data.success) {
      antdMessage.success({ 
        content: t('document.browse.addToFlowSuccess'), 
        key: 'addToFlow' 
      })
      
      // è·³è½¬åˆ°æµç¨‹è§†å›¾ï¼Œå¹¶ä¼ é€’æ–‡æ¡£ID
      const documentId = response.data.documentId || item.name
      window.location.hash = `#/documents?view=flow&docId=${encodeURIComponent(documentId)}`
    } else {
      antdMessage.error({ 
        content: response.data.message || t('document.browse.addToFlowFailed'), 
        key: 'addToFlow' 
      })
    }
  } catch (error) {
    console.error('Failed to add to flow view:', error)
    antdMessage.error({ 
      content: t('document.browse.addToFlowFailed'), 
      key: 'addToFlow' 
    })
  }
}, [t])
```

**æ•ˆæœ**:
- âœ… æ–‡ä»¶åˆ—è¡¨æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰"åŠ å…¥æµç¨‹è§†å›¾"æŒ‰é’®ï¼ˆSyncOutlinedå›¾æ ‡ï¼‰
- âœ… ç‚¹å‡»æŒ‰é’®åæ˜¾ç¤ºåŠ è½½æç¤º
- âœ… æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°æµç¨‹è§†å›¾å¹¶é€‰ä¸­è¯¥æ–‡æ¡£
- âœ… å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯

---

### 3. åç«¯ - APIç«¯ç‚¹å®ç°

**æ–‡ä»¶**: `omni-agent-web/.../DocumentManagementController.java`

#### APIå®šä¹‰

```java
/**
 * å°†æ–‡æ¡£ä»å­˜å‚¨ç›®å½•å¤åˆ¶åˆ°å¾…å¤„ç†ç›®å½•ï¼ˆåŠ å…¥æµç¨‹è§†å›¾ï¼‰â­
 * POST /api/documents/copy-to-pending
 *
 * ç”¨äºå°†å·²å®Œæˆçš„æ–‡æ¡£é‡æ–°åŠ å…¥æµç¨‹è§†å›¾è¿›è¡Œå¤„ç†
 * ä½¿ç”¨è™šæ‹Ÿè·¯å¾„ç³»ç»Ÿï¼šä» storage è¯»å–ï¼Œå†™å…¥åˆ° data/documents ä¸´æ—¶ç›®å½•
 */
@PostMapping("/copy-to-pending")
public Map<String, Object> copyToPending(@RequestBody Map<String, String> request) {
    // ...
}
```

#### å®ç°é€»è¾‘

```java
// 1. ä»å­˜å‚¨æœåŠ¡è¯»å–æ–‡æ¡£ï¼ˆè™šæ‹Ÿè·¯å¾„ç³»ç»Ÿï¼‰â­
log.debug("ä»å­˜å‚¨æœåŠ¡è¯»å–æ–‡æ¡£: {}", virtualPath);
byte[] fileData = storageService.readFile(virtualPath);

// 2. ç¡®ä¿ç›‘å¬ç›®å½•å­˜åœ¨
Path watchDir = Paths.get(watchDirectory);
if (!Files.exists(watchDir)) {
    Files.createDirectories(watchDir);
}

// 3. å†™å…¥åˆ°ç›‘å¬ç›®å½•ï¼ˆä¸´æ—¶ç›®å½•ï¼‰
Path targetFile = watchDir.resolve(fileName);

// å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œç”Ÿæˆæ–°æ–‡ä»¶åé¿å…è¦†ç›–
if (Files.exists(targetFile)) {
    // ç”Ÿæˆæ–°åç§°: æ–‡ä»¶å_1.pdf, æ–‡ä»¶å_2.pdf ...
}

Files.write(targetFile, fileData);

// 4. è¿”å›æ–‡æ¡£IDä¾›å‰ç«¯ä½¿ç”¨
result.put("documentId", documentId);
result.put("fileName", fileName);
```

**å…³é”®ç‰¹æ€§**:
- âœ… ä½¿ç”¨è™šæ‹Ÿè·¯å¾„ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼ˆFile/MinIO/S3/MongoDB/Elasticsearchï¼‰
- âœ… ä¸æ˜¯"å¤åˆ¶"æ“ä½œï¼Œè€Œæ˜¯ä»storageè¯»å–åå†™å…¥ä¸´æ—¶ç›®å½•
- âœ… è‡ªåŠ¨å¤„ç†æ–‡ä»¶åå†²çªï¼ˆç”Ÿæˆ_1ã€_2ç­‰åç¼€ï¼‰
- âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•ä¾¿äºè°ƒè¯•

---

### 4. å›½é™…åŒ–æ”¯æŒ

#### ä¸­æ–‡ (`UI/src/lang/zh.js`)

```javascript
browse: {
  // ... å…¶ä»–ç¿»è¯‘ ...
  
  // æµç¨‹è§†å›¾ / Flow View
  addToFlowView: 'åŠ å…¥æµç¨‹è§†å›¾',
  addingToFlow: 'æ­£åœ¨åŠ å…¥æµç¨‹è§†å›¾...',
  addToFlowSuccess: 'å·²åŠ å…¥æµç¨‹è§†å›¾ï¼Œå³å°†è·³è½¬',
  addToFlowFailed: 'åŠ å…¥æµç¨‹è§†å›¾å¤±è´¥',
}
```

#### è‹±æ–‡ (`UI/src/lang/en.js`)

```javascript
browse: {
  // ... other translations ...
  
  // Flow View
  addToFlowView: 'Add to Flow View',
  addingToFlow: 'Adding to flow view...',
  addToFlowSuccess: 'Added to flow view, redirecting...',
  addToFlowFailed: 'Failed to add to flow view',
}
```

---

## ğŸ“Š ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æ­£å¸¸æ–‡æ¡£å¤„ç†

```
1. ç”¨æˆ·ä¸Šä¼ æ–‡æ¡£ â†’ æ–‡æ¡£å‡ºç°åœ¨æµç¨‹è§†å›¾
2. ç³»ç»Ÿè‡ªåŠ¨å¤„ç† â†’ æ˜¾ç¤ºå¤„ç†è¿›åº¦
3. å¤„ç†å®Œæˆ â†’ æ–‡æ¡£è‡ªåŠ¨ä»åˆ—è¡¨æ¶ˆå¤± â­
4. åˆ‡æ¢åˆ°æµè§ˆå™¨è§†å›¾ â†’ å¯ä»¥æŸ¥çœ‹å·²å®Œæˆçš„æ–‡æ¡£
```

### åœºæ™¯2: é‡æ–°å¤„ç†æ–‡æ¡£

```
1. åœ¨æµè§ˆå™¨è§†å›¾æ‰¾åˆ°æ–‡æ¡£
2. ç‚¹å‡»"åŠ å…¥æµç¨‹è§†å›¾"æŒ‰é’® â­
3. è‡ªåŠ¨è·³è½¬åˆ°æµç¨‹è§†å›¾
4. æ–‡æ¡£å‡ºç°åœ¨å¾…å¤„ç†åˆ—è¡¨
5. å¯ä»¥é‡æ–°é…ç½®ç­–ç•¥å¹¶å¤„ç†
```

### åœºæ™¯3: æµ‹è¯•æ–°ç­–ç•¥

```
1. å·²å®Œæˆçš„æ–‡æ¡£å­˜å‚¨åœ¨ storage
2. æƒ³æµ‹è¯•æ–°çš„åˆ†å—ç­–ç•¥
3. å°†æ–‡æ¡£é‡æ–°åŠ å…¥æµç¨‹è§†å›¾
4. é…ç½®æ–°çš„åˆ†å—å‚æ•°
5. å¼€å§‹å¤„ç†å¹¶æŸ¥çœ‹æ•ˆæœ
```

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒ

### æµç¨‹è§†å›¾

**ä¹‹å‰**:
- âŒ å·²å®Œæˆçš„æ–‡æ¡£ä¸€ç›´æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
- âŒ åˆ—è¡¨è¶Šæ¥è¶Šé•¿ï¼Œéš¾ä»¥ç®¡ç†
- âŒ æ— æ³•åŒºåˆ†å¾…å¤„ç†å’Œå·²å®Œæˆçš„æ–‡æ¡£

**ä¹‹å**:
- âœ… åªæ˜¾ç¤ºå¾…å¤„ç†å’Œå¤„ç†ä¸­çš„æ–‡æ¡£
- âœ… å®Œæˆåè‡ªåŠ¨æ¶ˆå¤±ï¼Œåˆ—è¡¨ä¿æŒæ¸…çˆ½
- âœ… æ¸…æ™°çš„çŠ¶æ€åŒºåˆ†

### æµè§ˆå™¨è§†å›¾

**æ–°å¢åŠŸèƒ½**:
- âœ… æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰"åŠ å…¥æµç¨‹è§†å›¾"æŒ‰é’®
- âœ… ä¸€é”®å°†å·²å®Œæˆæ–‡æ¡£é‡æ–°åŠ å…¥å¤„ç†é˜Ÿåˆ—
- âœ… è‡ªåŠ¨è·³è½¬ï¼Œæ— ç¼ä½“éªŒ

---

## ğŸ” æŠ€æœ¯äº®ç‚¹

### 1. è™šæ‹Ÿè·¯å¾„ç³»ç»Ÿ

ä¸ä¾èµ–å…·ä½“çš„å­˜å‚¨å®ç°ï¼Œæ”¯æŒï¼š
- âœ… æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ (File)
- âœ… MinIO å¯¹è±¡å­˜å‚¨
- âœ… AWS S3
- âœ… MongoDB GridFS
- âœ… Elasticsearch

### 2. è‡ªåŠ¨åˆ·æ–°æœºåˆ¶

```javascript
// WebSocketç›‘å¬å¤„ç†å®Œæˆäº‹ä»¶
if (message.data.status === 'COMPLETED') {
    // å»¶è¿Ÿåˆ·æ–°ç¡®ä¿åç«¯çŠ¶æ€å·²æ›´æ–°
    setTimeout(() => {
        loadDocumentsList();
    }, 1000);
}
```

### 3. æ™ºèƒ½æ–‡ä»¶åå¤„ç†

```java
// è‡ªåŠ¨å¤„ç†æ–‡ä»¶åå†²çª
if (Files.exists(targetFile)) {
    fileName = baseName + "_" + counter + extension;
}
```

---

## ğŸ“ é…ç½®è¯´æ˜

### ç›‘å¬ç›®å½•é…ç½®

åœ¨ `application.yml` ä¸­é…ç½®ï¼š

```yaml
omni-agent:
  file-watcher:
    watch-directory: ./data/documents  # ä¸´æ—¶å¤„ç†ç›®å½•
```

### å­˜å‚¨ç›®å½•

æ–‡æ¡£å®Œæˆåè‡ªåŠ¨ä¿å­˜åˆ°ï¼š
```
data/storage/documents/{documentId}/{filename}
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### å‰ææ¡ä»¶

âš ï¸ **é‡è¦**: åœ¨æµ‹è¯•å‰éœ€è¦é‡æ–°ç¼–è¯‘å¹¶å¯åŠ¨åç«¯æœåŠ¡ï¼š

```bash
# 1. åœæ­¢å½“å‰è¿è¡Œçš„æœåŠ¡
# 2. é‡æ–°ç¼–è¯‘
mvn clean install -DskipTests

# 3. å¯åŠ¨æœåŠ¡
cd omni-agent-web
mvn spring-boot:run
```

æˆ–è€…åœ¨ IDE ä¸­é‡æ–°å¯åŠ¨ Spring Boot åº”ç”¨ã€‚

### æµ‹è¯•æ­¥éª¤

1. **ä¸Šä¼ æ–‡æ¡£æµ‹è¯•**
   ```
   1. ä¸Šä¼ ä¸€ä¸ªPDFæ–‡æ¡£
   2. åˆ‡æ¢åˆ°æµç¨‹è§†å›¾
   3. è§‚å¯Ÿæ–‡æ¡£åœ¨å¾…å¤„ç†åˆ—è¡¨ä¸­
   4. ç­‰å¾…å¤„ç†å®Œæˆ
   5. éªŒè¯æ–‡æ¡£è‡ªåŠ¨æ¶ˆå¤± âœ…
   ```

2. **é‡æ–°åŠ å…¥æµ‹è¯•**
   ```
   1. åˆ‡æ¢åˆ°æµè§ˆå™¨è§†å›¾
   2. æ‰¾åˆ°å·²å®Œæˆçš„æ–‡æ¡£
   3. ç‚¹å‡»"åŠ å…¥æµç¨‹è§†å›¾"æŒ‰é’®
   4. éªŒè¯è‡ªåŠ¨è·³è½¬ âœ…
   5. éªŒè¯æ–‡æ¡£å‡ºç°åœ¨å¾…å¤„ç†åˆ—è¡¨ âœ…
   ```

3. **å¹¶å‘å¤„ç†æµ‹è¯•**
   ```
   1. æ‰¹é‡ä¸Šä¼ å¤šä¸ªæ–‡æ¡£
   2. è§‚å¯Ÿå®ƒä»¬ä¾æ¬¡å¤„ç†
   3. å®Œæˆçš„æ–‡æ¡£é€ä¸ªæ¶ˆå¤± âœ…
   ```

---

## ğŸ‰ æ€»ç»“

**æ–°å¢åŠŸèƒ½**:
1. âœ… å¤„ç†å®Œæˆåè‡ªåŠ¨ä»æµç¨‹è§†å›¾ç§»é™¤
2. âœ… æµè§ˆå™¨è§†å›¾å¯ä»¥é‡æ–°åŠ å…¥æµç¨‹
3. âœ… åŸºäºè™šæ‹Ÿè·¯å¾„çš„å­˜å‚¨æŠ½è±¡
4. âœ… å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒ

**ç”¨æˆ·ä»·å€¼**:
- âœ… æ›´æ¸…çˆ½çš„æµç¨‹è§†å›¾ç•Œé¢
- âœ… çµæ´»çš„æ–‡æ¡£ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… æ”¯æŒé‡æ–°å¤„ç†å·²å®Œæˆæ–‡æ¡£
- âœ… æ— ç¼çš„æ“ä½œä½“éªŒ

**æŠ€æœ¯ä»·å€¼**:
- âœ… è§£è€¦å­˜å‚¨å®ç°
- âœ… è‡ªåŠ¨åŒ–çŠ¶æ€ç®¡ç†
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†
- âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1: 405 Method Not Allowed

**ç—‡çŠ¶**:
```
Failed to load resource: the server responded with a status of 405 (Method Not Allowed)
POST http://localhost:8080/api/documents/copy-to-pending
```

**åŸå› **: åç«¯ä»£ç å·²ä¿®æ”¹ï¼Œä½†æœåŠ¡å™¨æ²¡æœ‰é‡å¯ï¼Œæ–°çš„ API ç«¯ç‚¹æœªç”Ÿæ•ˆã€‚

**è§£å†³æ–¹æ¡ˆ**:
1. **åœæ­¢å½“å‰è¿è¡Œçš„åç«¯æœåŠ¡**
2. **é‡æ–°ç¼–è¯‘é¡¹ç›®**:
   ```bash
   mvn clean install -DskipTests
   ```
3. **é‡æ–°å¯åŠ¨åç«¯**:
   ```bash
   cd omni-agent-web
   mvn spring-boot:run
   ```
   æˆ–åœ¨ IDE ä¸­é‡å¯ Spring Boot åº”ç”¨

### é—®é¢˜2: Ant Design Message è­¦å‘Š

**ç—‡çŠ¶**:
```
Warning: [antd: message] Static function can not consume context like dynamic theme. 
Please use 'App' component instead.
```

**åŸå› **: ä½¿ç”¨äº† `antd` çš„é™æ€ `message` æ–¹æ³•è€Œä¸æ˜¯ `App` ç»„ä»¶çš„ messageã€‚

**è§£å†³æ–¹æ¡ˆ**: âœ… å·²ä¿®å¤
- ä½¿ç”¨ `useMessage()` hook ä»£æ›¿é™æ€æ–¹æ³•
- ç§»é™¤ `import { message as antdMessage } from 'antd'`
- æ‰€æœ‰ `antdMessage.xxx()` æ”¹ä¸º `message.xxx()`

### é—®é¢˜3: æ–‡æ¡£æœªä»æµç¨‹è§†å›¾æ¶ˆå¤±

**ç—‡çŠ¶**: æ–‡æ¡£å¤„ç†å®Œæˆåä»ç„¶æ˜¾ç¤ºåœ¨å¾…å¤„ç†åˆ—è¡¨ä¸­ã€‚

**å¯èƒ½åŸå› **:
1. WebSocket è¿æ¥æœªå»ºç«‹
2. åç«¯çŠ¶æ€æ›´æ–°å»¶è¿Ÿ
3. å‰ç«¯åˆ·æ–°é—´éš”å¤ªçŸ­

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„ WebSocket è¿æ¥çŠ¶æ€
- ç­‰å¾… 1-2 ç§’åæ‰‹åŠ¨ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
- åˆ‡æ¢åˆ°å…¶ä»–è§†å›¾å†åˆ‡å›æµç¨‹è§†å›¾

### é—®é¢˜4: æ— æ³•è¯»å–æ–‡æ¡£æ•°æ®

**ç—‡çŠ¶**:
```json
{
  "success": false,
  "message": "æ— æ³•è¯»å–æ–‡æ¡£æ•°æ®ï¼ˆæ–‡ä»¶å¯èƒ½ä¸å­˜åœ¨æˆ–ä¸ºç©ºï¼‰"
}
```

**å¯èƒ½åŸå› **:
1. è™šæ‹Ÿè·¯å¾„ä¸æ­£ç¡®
2. å­˜å‚¨æœåŠ¡æœªæ­£ç¡®é…ç½®
3. æ–‡æ¡£ç¡®å®ä¸å­˜åœ¨

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼Œç¡®è®¤ä¼ é€’çš„ `path` å‚æ•°
- åœ¨åç«¯æ—¥å¿—ä¸­æŸ¥çœ‹å®Œæ•´çš„è™šæ‹Ÿè·¯å¾„
- ç¡®è®¤å­˜å‚¨æœåŠ¡é…ç½®æ­£ç¡®ï¼ˆFile/MinIO/S3/MongoDB ç­‰ï¼‰

---

## ğŸš€ åç»­ä¼˜åŒ–æ–¹å‘

1. **æ‰¹é‡æ“ä½œ** - æ”¯æŒæ‰¹é‡é‡æ–°åŠ å…¥æµç¨‹è§†å›¾
2. **å†å²è®°å½•** - è®°å½•æ–‡æ¡£çš„å¤„ç†å†å²
3. **ç‰ˆæœ¬å¯¹æ¯”** - å¯¹æ¯”ä¸åŒç­–ç•¥çš„å¤„ç†ç»“æœ
4. **å®šæ—¶æ¸…ç†** - è‡ªåŠ¨æ¸…ç†ä¸´æ—¶ç›®å½•ä¸­çš„è¿‡æœŸæ–‡ä»¶

---

**å®ç°å®Œæˆæ—¶é—´**: 2025å¹´12æœˆ26æ—¥  
**å¼€å‘äººå‘˜**: GitHub Copilot  
**æµ‹è¯•çŠ¶æ€**: å¾…éªŒè¯ â³

