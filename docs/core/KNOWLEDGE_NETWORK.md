# çŸ¥è¯†ç½‘ç»œæ¶æ„

> **ç‰ˆæœ¬ï¼š** 1.0.0  
> **æ›´æ–°æ—¶é—´ï¼š** 2026-01-01  
> **çŠ¶æ€ï¼š** âœ… å·²å®ç°

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ ¸å¿ƒæ¶æ„](#æ ¸å¿ƒæ¶æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [çŸ¥è¯†åŸŸç®¡ç†](#çŸ¥è¯†åŸŸç®¡ç†)
5. [æ™ºèƒ½æ£€ç´¢](#æ™ºèƒ½æ£€ç´¢)
6. [çŸ¥è¯†å…³è”](#çŸ¥è¯†å…³è”)
7. [ç”¨æˆ·åå¥½å­¦ä¹ ](#ç”¨æˆ·åå¥½å­¦ä¹ )
8. [é…ç½®ä¸ä½¿ç”¨](#é…ç½®ä¸ä½¿ç”¨)
9. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

### ä»€ä¹ˆæ˜¯çŸ¥è¯†ç½‘ç»œï¼Ÿ

**çŸ¥è¯†ç½‘ç»œ**ï¼ˆKnowledge Networkï¼‰æ˜¯ OmniAgent çš„**æ ¸å¿ƒçŸ¥è¯†ç®¡ç†ç³»ç»Ÿ**ï¼Œæä¾›ï¼š

- ğŸ“š **çŸ¥è¯†åŸŸç®¡ç†** - æŒ‰é¢†åŸŸç»„ç»‡çŸ¥è¯†ï¼Œç‹¬ç«‹çš„å‘é‡ç©ºé—´
- ğŸ” **æ™ºèƒ½æ£€ç´¢** - è·¨åŸŸæŸ¥è¯¢ã€åŸŸè·¯ç”±ã€è´¨é‡è¯„åˆ†
- ğŸ•¸ï¸ **çŸ¥è¯†å…³è”** - è‡ªåŠ¨å‘ç°çŸ¥è¯†å…³è”å’Œå¼•ç”¨å…³ç³»
- ğŸ‘¤ **ä¸ªæ€§åŒ–å­¦ä¹ ** - å­¦ä¹ ç”¨æˆ·åå¥½ï¼Œä¼˜åŒ–æ£€ç´¢ç»“æœ
- ğŸ¯ **çŸ¥è¯†ç²¾ç‚¼** - AIæç‚¼æ ¸å¿ƒçŸ¥è¯†ç‚¹

### è®¾è®¡ç†å¿µ

```
ä¼ ç»Ÿ RAG:
æ‰€æœ‰æ–‡æ¡£æ··åœ¨ä¸€ä¸ªå‘é‡ç©ºé—´ â†’ æ— æ³•é’ˆå¯¹æ€§ä¼˜åŒ– â†’ æ£€ç´¢ç²¾åº¦ä½ âŒ

OmniAgent çŸ¥è¯†ç½‘ç»œ:
â”œâ”€ æŠ€æœ¯åŸŸ â†’ ç‹¬ç«‹å‘é‡ç©ºé—´ â†’ ä¸“ä¸šåŒ–æ£€ç´¢ç­–ç•¥
â”œâ”€ ä¸šåŠ¡åŸŸ â†’ ç‹¬ç«‹å‘é‡ç©ºé—´ â†’ ä¸šåŠ¡çŸ¥è¯†ä¼˜åŒ–
â””â”€ æµ‹è¯•åŸŸ â†’ ç‹¬ç«‹å‘é‡ç©ºé—´ â†’ æµ‹è¯•çŸ¥è¯†èšç„¦
    â†“
æ™ºèƒ½è·¯ç”± + è·¨åŸŸæŸ¥è¯¢ + è´¨é‡è¯„åˆ† = é«˜ç²¾åº¦æ£€ç´¢ âœ…
```

---

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OmniAgent çŸ¥è¯†ç½‘ç»œç³»ç»Ÿ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çŸ¥è¯†åŸŸç®¡ç†   â”‚  â”‚  æ™ºèƒ½æ£€ç´¢     â”‚  â”‚  çŸ¥è¯†å…³è”     â”‚
â”‚  Domain Mgmt  â”‚  â”‚  Smart Search â”‚  â”‚  Association  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ ¸å¿ƒæœåŠ¡å±‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ çŸ¥è¯†å­˜å‚¨     â”‚  â”‚ çŸ¥è¯†æå–     â”‚  â”‚ çŸ¥è¯†æç‚¼         â”‚   â”‚
â”‚  â”‚ Storage      â”‚  â”‚ Extraction   â”‚  â”‚ Refinement       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ åŸŸè·¯ç”±       â”‚  â”‚ è·¨åŸŸæŸ¥è¯¢     â”‚  â”‚ ç”¨æˆ·åå¥½å­¦ä¹      â”‚   â”‚
â”‚  â”‚ Router       â”‚  â”‚ Cross-Domain â”‚  â”‚ User Preference  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è´¨é‡è¯„åˆ†     â”‚  â”‚ æŸ¥è¯¢ç¼“å­˜     â”‚  â”‚ ç»“æœé‡æ’åº       â”‚   â”‚
â”‚  â”‚ Quality      â”‚  â”‚ Cache        â”‚  â”‚ Re-Ranker        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RAG Service  â”‚  â”‚  AI Service   â”‚  â”‚  Storage      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—ä¾èµ–å…³ç³»

```
omni-agent-knowledge-registry-starter (å®ç°å±‚)
    â”œâ”€â†’ omni-agent-knowledge-registry-api (æ¥å£å±‚)
    â”œâ”€â†’ omni-agent-rag-api (RAG æœåŠ¡)
    â”œâ”€â†’ omni-agent-ai-api (AI æœåŠ¡)
    â””â”€â†’ omni-agent-document-storage-api (å­˜å‚¨æœåŠ¡)
```

---

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶

### 1. çŸ¥è¯†åŸŸæœåŠ¡ï¼ˆKnowledgeDomainServiceï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/network/impl/KnowledgeDomainService.java`

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
```java
@Service
public class KnowledgeDomainService {
    
    // åˆ›å»ºçŸ¥è¯†åŸŸ
    public KnowledgeDomain createDomain(CreateDomainRequest request);
    
    // è·å–çŸ¥è¯†åŸŸ
    public KnowledgeDomain getDomain(String domainId);
    
    // åˆ—å‡ºæ‰€æœ‰åŸŸ
    public List<KnowledgeDomain> listAllDomains();
    
    // æ›´æ–°åŸŸ
    public KnowledgeDomain updateDomain(String domainId, UpdateDomainRequest request);
    
    // åˆ é™¤åŸŸ
    public boolean deleteDomain(String domainId);
    
    // ç»Ÿè®¡åŸŸæ•°é‡
    public long countDomains();
}
```

**çŸ¥è¯†åŸŸæ¨¡å‹ï¼š**
```java
@Data
@Builder
public class KnowledgeDomain {
    private String domainId;        // åŸŸIDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
    private String name;            // åŸŸåç§°
    private String description;     // åŸŸæè¿°
    private DomainType type;        // åŸŸç±»å‹
    private DomainStatus status;    // åŸŸçŠ¶æ€
    private Map<String, Object> metadata;  // å…ƒæ•°æ®
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
}
```

**åŸŸç±»å‹ï¼š**
- `TECHNICAL` - æŠ€æœ¯åŸŸï¼ˆä»£ç ã€æ¶æ„ã€APIï¼‰
- `BUSINESS` - ä¸šåŠ¡åŸŸï¼ˆéœ€æ±‚ã€æµç¨‹ã€è§„åˆ™ï¼‰
- `GENERAL` - é€šç”¨åŸŸï¼ˆæ–‡æ¡£ã€æ‰‹å†Œï¼‰
- `CUSTOM` - è‡ªå®šä¹‰åŸŸ

### 2. çŸ¥è¯†å­˜å‚¨æœåŠ¡ï¼ˆKnowledgeStorageServiceï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-api/network/KnowledgeStorageService.java`

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
```java
public interface KnowledgeStorageService {
    
    // ä¿å­˜çŸ¥è¯†
    void saveKnowledge(RefinedKnowledge knowledge, String domainId);
    
    // æ‰¹é‡ä¿å­˜
    void saveBatch(List<RefinedKnowledge> knowledgeList, String domainId);
    
    // è·å–çŸ¥è¯†
    RefinedKnowledge getKnowledge(String knowledgeId, String domainId);
    
    // æœç´¢çŸ¥è¯†
    List<RefinedKnowledge> searchKnowledge(String query, String domainId, int maxResults);
    
    // åˆ é™¤çŸ¥è¯†
    void deleteKnowledge(String knowledgeId, String domainId);
}
```

**ç²¾ç‚¼çŸ¥è¯†æ¨¡å‹ï¼š**
```java
@Data
@Builder
public class RefinedKnowledge {
    private String knowledgeId;         // çŸ¥è¯†ID
    private String title;               // æ ‡é¢˜
    private String summary;             // æ‘˜è¦
    private String refinedContent;      // ç²¾ç‚¼åçš„å†…å®¹
    private String originalContent;     // åŸå§‹å†…å®¹
    private List<String> keywords;      // å…³é”®è¯
    private List<String> tags;          // æ ‡ç­¾
    private String domainId;            // æ‰€å±åŸŸ
    private Map<String, Object> metadata;
    private LocalDateTime createdAt;
}
```

### 3. çŸ¥è¯†æå–æœåŠ¡ï¼ˆKnowledgeExtractionServiceï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/network/impl/DefaultKnowledgeExtractionService.java`

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
```java
public interface KnowledgeExtractionService {
    
    // ä»åŸŸä¸­æå–æ–‡æ¡£
    List<KnowledgeDocument> extractDocumentsFromDomain(
        String domainId, 
        int maxResults
    );
    
    // æ ¹æ®æŸ¥è¯¢æå–ç›¸å…³æ–‡æ¡£
    List<KnowledgeDocument> extractDocumentsByQuery(
        String query, 
        List<String> domainIds, 
        int maxResults
    );
    
    // æå–æ–‡æ¡£è¯¦æƒ…
    KnowledgeDocument extractDocumentDetails(
        String documentId, 
        String domainId
    );
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```java
@Service
public class MyService {
    
    @Autowired
    private KnowledgeExtractionService extractionService;
    
    public void demo() {
        // ä»æŠ€æœ¯åŸŸæå–å‰10ä¸ªæ–‡æ¡£
        List<KnowledgeDocument> docs = extractionService
            .extractDocumentsFromDomain("tech-domain", 10);
        
        // è·¨å¤šä¸ªåŸŸæŸ¥è¯¢
        List<KnowledgeDocument> results = extractionService
            .extractDocumentsByQuery("Spring Boot", 
                Arrays.asList("tech-domain", "java-domain"), 20);
    }
}
```

### 4. çŸ¥è¯†æç‚¼æœåŠ¡ï¼ˆKnowledgeRefinementServiceï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/network/impl/DefaultKnowledgeRefinementService.java`

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
```java
public interface KnowledgeRefinementService {
    
    // æç‚¼å•ä¸ªæ–‡æ¡£
    RefinedKnowledge refineKnowledge(
        KnowledgeDocument document,
        KnowledgeRole role,
        boolean useAI
    );
    
    // æ‰¹é‡æç‚¼
    List<RefinedKnowledge> batchRefineKnowledge(
        List<KnowledgeDocument> documents,
        KnowledgeRole role,
        boolean useAI
    );
}
```

**AI æç‚¼æµç¨‹ï¼š**
```
åŸå§‹æ–‡æ¡£
    â†“
AI åˆ†ææå–
    â”œâ”€ æ ¸å¿ƒæ¦‚å¿µ
    â”œâ”€ å…³é”®æ­¥éª¤
    â”œâ”€ é‡è¦å…¬å¼
    â””â”€ ä»£ç ç¤ºä¾‹
    â†“
ç”Ÿæˆæ‘˜è¦å’Œå…³é”®è¯
    â†“
ç²¾ç‚¼çŸ¥è¯†å¯¹è±¡
```

### 5. çŸ¥è¯†å…³è”æœåŠ¡ï¼ˆKnowledgeAssociationServiceï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/network/impl/DefaultKnowledgeAssociationService.java`

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
```java
public interface KnowledgeAssociationService {
    
    // æŸ¥æ‰¾ç›¸å…³çŸ¥è¯†
    List<RefinedKnowledge> findRelatedKnowledge(
        String knowledgeId,
        String domainId,
        int maxResults
    );
    
    // è·¨åŸŸæŸ¥æ‰¾ç›¸å…³çŸ¥è¯†
    List<RefinedKnowledge> findCrossDomainRelatedKnowledge(
        String knowledgeId,
        String sourceDomainId,
        List<String> targetDomainIds,
        int maxResults
    );
    
    // å»ºç«‹çŸ¥è¯†å…³è”
    void createAssociation(KnowledgeAssociation association);
    
    // æŸ¥æ‰¾å…³è”çš„åŸŸ
    List<DomainAssociation> findRelatedDomains(String domainId, int topK);
    
    // æ¨èç›¸å…³åŸŸ
    List<DomainRecommendation> recommendDomains(String query, int topK);
}
```

**å…³è”å‘ç°æœºåˆ¶ï¼š**
```
1. å…³é”®è¯åŒ¹é…
   - æå–çŸ¥è¯†å…³é”®è¯
   - åœ¨å…¶ä»–çŸ¥è¯†ä¸­æœç´¢åŒ¹é…
   
2. è¯­ä¹‰ç›¸ä¼¼åº¦
   - ä½¿ç”¨å‘é‡æœç´¢
   - è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
   
3. åŸŸå¼•ç”¨åˆ†æ
   - åˆ†æå†…å®¹ä¸­çš„åŸŸåç§°
   - å»ºç«‹è·¨åŸŸå¼•ç”¨å…³ç³»
   
4. è‡ªåŠ¨å…³è”å­˜å‚¨
   - ä¿å­˜å…³è”å…³ç³»
   - æ”¯æŒåŒå‘å…³è”æŸ¥è¯¢
```

---

## ğŸ” æ™ºèƒ½æ£€ç´¢

### 1. åŸŸè·¯ç”±ï¼ˆDomainRouterï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/router/DomainRouter.java`

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
```java
@Service
public class DomainRouter {
    
    // è·¯ç”±æŸ¥è¯¢åˆ°åˆé€‚çš„åŸŸ
    public QueryRouteResult route(String query);
    
    // å¸¦è§’è‰²çš„è·¯ç”±
    public QueryRouteResult routeWithRole(String query, String roleId);
    
    // æ‰‹åŠ¨æŒ‡å®šåŸŸ
    public QueryRouteResult routeToSpecificDomains(
        String query, 
        List<String> domainIds
    );
}
```

**è·¯ç”±ç­–ç•¥ï¼š**
```
ç”¨æˆ·æŸ¥è¯¢: "å¦‚ä½•å®ç° Spring Boot JWT è®¤è¯ï¼Ÿ"
    â†“
1. æ„å›¾åˆ†æ
   - è¯†åˆ«æŠ€æœ¯æ ˆï¼šSpring Boot
   - è¯†åˆ«ä¸»é¢˜ï¼šè®¤è¯ã€JWT
   â†“
2. åŸŸåŒ¹é…
   - æŠ€æœ¯åŸŸ (tech-domain)       â†’ åŒ¹é…åº¦ 0.95
   - JavaåŸŸ (java-domain)        â†’ åŒ¹é…åº¦ 0.85
   - å®‰å…¨åŸŸ (security-domain)    â†’ åŒ¹é…åº¦ 0.90
   â†“
3. è·¯ç”±ç»“æœ
   - ä¸»åŸŸï¼šsecurity-domain
   - è¾…åŠ©åŸŸï¼štech-domain, java-domain
   - ç½®ä¿¡åº¦ï¼š0.92
```

### 2. è·¨åŸŸæŸ¥è¯¢ï¼ˆCrossDomainQueryServiceï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/service/query/CrossDomainQueryService.java`

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
```java
@Service
public class CrossDomainQueryService {
    
    // è·¨åŸŸæŸ¥è¯¢
    public CrossDomainQueryResult crossDomainSearch(
        String query, 
        int maxResults
    );
    
    // å¸¦ç”¨æˆ·IDçš„ä¸ªæ€§åŒ–æŸ¥è¯¢
    public CrossDomainQueryResult crossDomainSearchWithUser(
        String query, 
        int maxResults, 
        String userId
    );
}
```

**æŸ¥è¯¢æµç¨‹ï¼š**
```
1. åŸŸè·¯ç”±
   â””â”€ è¯†åˆ«ç›¸å…³åŸŸ

2. å¹¶å‘æŸ¥è¯¢
   â”œâ”€ åŸŸ1 â†’ RAG æœç´¢
   â”œâ”€ åŸŸ2 â†’ RAG æœç´¢
   â””â”€ åŸŸ3 â†’ RAG æœç´¢
   
3. ç»“æœåˆå¹¶
   â”œâ”€ åŸŸæƒé‡è®¡ç®—
   â”‚  â”œâ”€ åŸºç¡€æƒé‡ï¼ˆè·¯ç”±åŒ¹é…åº¦ï¼‰
   â”‚  â”œâ”€ è´¨é‡è¯„åˆ†ï¼ˆåŸŸè´¨é‡ï¼‰
   â”‚  â””â”€ ç”¨æˆ·åå¥½ï¼ˆä¸ªæ€§åŒ–ï¼‰
   â”‚
   â””â”€ é‡æ’åº
      â””â”€ ç»¼åˆå¾—åˆ†æ’åº

4. ç¼“å­˜ç»“æœ
   â””â”€ å­˜å‚¨åˆ°æŸ¥è¯¢ç¼“å­˜

5. è¿”å›ç»“æœ
```

**æƒé‡è®¡ç®—å…¬å¼ï¼š**
```java
// ç»¼åˆæƒé‡ = åŸºç¡€æƒé‡ Ã— è´¨é‡åˆ†æ•° Ã— åå¥½æƒé‡
double finalWeight = baseWeight * qualityScore * preferenceWeight;

// åŸºç¡€æƒé‡ï¼šè·¯ç”±åŒ¹é…åº¦ï¼ˆ0.0 ~ 1.0ï¼‰
// è´¨é‡åˆ†æ•°ï¼šåŸŸè´¨é‡è¯„åˆ†ï¼ˆ0.0 ~ 1.0ï¼‰
// åå¥½æƒé‡ï¼šç”¨æˆ·åå¥½ç³»æ•°ï¼ˆ0.5 ~ 1.5ï¼‰
```

### 3. è´¨é‡è¯„åˆ†ï¼ˆDomainQualityScorerï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/service/quality/DomainQualityScorer.java`

**è¯„åˆ†ç»´åº¦ï¼š**
```java
public class DomainQualityScorer {
    
    // è®¡ç®—åŸŸè´¨é‡åˆ†æ•°
    public double calculateQualityScore(String domainId);
    
    // æ›´æ–°è´¨é‡ç»Ÿè®¡
    public void updateStats(String domainId, QueryResult result);
}
```

**è´¨é‡æŒ‡æ ‡ï¼š**
- âœ… **æŸ¥è¯¢å‘½ä¸­ç‡** - è¿”å›ç»“æœçš„æ¯”ä¾‹
- âœ… **ç»“æœç›¸å…³æ€§** - ç»“æœä¸æŸ¥è¯¢çš„åŒ¹é…åº¦
- âœ… **ç”¨æˆ·åé¦ˆ** - æ­£é¢/è´Ÿé¢åé¦ˆæ¯”ä¾‹
- âœ… **çŸ¥è¯†å®Œæ•´æ€§** - çŸ¥è¯†ç‚¹çš„ä¸°å¯Œç¨‹åº¦

### 4. æŸ¥è¯¢ç¼“å­˜ï¼ˆQueryResultCacheï¼‰

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/service/cache/QueryResultCache.java`

**ç¼“å­˜ç­–ç•¥ï¼š**
```java
@Service
public class QueryResultCache {
    
    // è·å–ç¼“å­˜ç»“æœ
    public Optional<CrossDomainQueryResult> get(String query);
    
    // ä¿å­˜ç»“æœåˆ°ç¼“å­˜
    public void put(String query, CrossDomainQueryResult result);
    
    // æ¸…é™¤ç¼“å­˜
    public void invalidate(String query);
    
    // é¢„çƒ­ç¼“å­˜
    public void warmUp(List<String> hotQueries);
}
```

**ç¼“å­˜é…ç½®ï¼š**
```yaml
omni-agent:
  knowledge-registry:
    cache:
      enabled: true          # å¯ç”¨ç¼“å­˜
      max-size: 1000         # æœ€å¤§ç¼“å­˜æ¡ç›®
      ttl: 3600              # è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
      persistence: true      # æŒä¹…åŒ–ç¼“å­˜
      warm-up: true          # å¯åŠ¨æ—¶é¢„çƒ­
```

---

## ğŸ‘¤ ç”¨æˆ·åå¥½å­¦ä¹ 

### UserPreferenceLearner

**ä½ç½®ï¼š** `omni-agent-knowledge-registry-starter/service/preference/UserPreferenceLearner.java`

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
```java
@Service
public class UserPreferenceLearner {
    
    // è®°å½•ç”¨æˆ·æŸ¥è¯¢
    public void recordQuery(String userId, String query, 
                           String domainId, int resultCount);
    
    // è®°å½•åŸŸåé¦ˆ
    public void recordDomainFeedback(String userId, 
                                    String domainId, 
                                    boolean isPositive);
    
    // è·å–åŸŸåå¥½æƒé‡
    public double getDomainPreferenceWeight(String userId, String domainId);
    
    // è·å–åå¥½åŸŸåˆ—è¡¨
    public List<String> getPreferredDomains(String userId, int topK);
}
```

**å­¦ä¹ æœºåˆ¶ï¼š**
```
ç”¨æˆ·è¡Œä¸ºè®°å½•
    â”œâ”€ æŸ¥è¯¢å†å²
    â”œâ”€ ä½¿ç”¨çš„åŸŸ
    â”œâ”€ ç‚¹å‡»çš„ç»“æœ
    â””â”€ åé¦ˆï¼ˆç‚¹èµ/ç‚¹è¸©ï¼‰
    â†“
åå¥½åˆ†æ
    â”œâ”€ åŸŸä½¿ç”¨é¢‘ç‡
    â”œâ”€ æŸ¥è¯¢ä¸»é¢˜åˆ†æ
    â”œâ”€ åé¦ˆç»Ÿè®¡
    â””â”€ æ—¶é—´è¡°å‡
    â†“
ç”Ÿæˆåå¥½æƒé‡
    â””â”€ å½±å“åç»­æŸ¥è¯¢çš„åŸŸé€‰æ‹©å’Œæ’åº
```

**æƒé‡è®¡ç®—ï¼š**
```java
public double getDomainPreferenceWeight(String userId, String domainId) {
    UserPreference preference = userPreferences.get(userId);
    
    // æ–°ç”¨æˆ·è¿”å›ä¸­æ€§æƒé‡
    if (preference == null || preference.getTotalQueries() < 5) {
        return 1.0;
    }
    
    // è®¡ç®—ä½¿ç”¨é¢‘ç‡
    DomainUsageStats stats = preference.getDomainUsage().get(domainId);
    double frequencyWeight = calculateFrequencyWeight(stats);
    
    // è®¡ç®—åé¦ˆæƒé‡
    double feedbackWeight = calculateFeedbackWeight(stats);
    
    // æ—¶é—´è¡°å‡
    double timeDecay = calculateTimeDecay(stats.getLastUsedTime());
    
    // ç»¼åˆæƒé‡ï¼ˆ0.5 - 1.5 èŒƒå›´ï¼‰
    return Math.max(0.5, Math.min(1.5, 
        frequencyWeight * feedbackWeight * timeDecay));
}
```

**æŒä¹…åŒ–ï¼š**
```java
// ç”¨æˆ·åå¥½è‡ªåŠ¨æŒä¹…åŒ–åˆ°å­˜å‚¨
@PreDestroy
public void onShutdown() {
    persistUserPreferences();
}

// å¯åŠ¨æ—¶åŠ è½½
@PostConstruct
public void onStartup() {
    loadUserPreferences();
}
```

---

## âš™ï¸ é…ç½®ä¸ä½¿ç”¨

### é…ç½®ç¤ºä¾‹

```yaml
omni-agent:
  knowledge-registry:
    # æ˜¯å¦å¯ç”¨çŸ¥è¯†æ³¨å†Œè¡¨
    enabled: true
    
    # ç¼“å­˜é…ç½®
    cache-size: 1000
    
    # è·¨åŸŸæŸ¥è¯¢é…ç½®
    cross-domain-query:
      enabled: true
      thread-pool-size: 10       # å¹¶å‘æŸ¥è¯¢çº¿ç¨‹æ•°
      timeout: 30000             # æŸ¥è¯¢è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰
      
    # è´¨é‡è¯„åˆ†é…ç½®
    quality-scorer:
      enabled: true
      persistence: true          # æŒä¹…åŒ–è¯„åˆ†æ•°æ®
      
    # ç”¨æˆ·åå¥½å­¦ä¹ 
    user-preference:
      enabled: true
      persistence: true
      min-queries: 5             # æœ€å°‘æŸ¥è¯¢æ¬¡æ•°æ‰å¯ç”¨åå¥½
      
    # æŸ¥è¯¢ç¼“å­˜
    query-cache:
      enabled: true
      max-size: 1000
      ttl: 3600
      persistence: true
      warm-up: true
```

### ä½¿ç”¨ç¤ºä¾‹

#### 1. åˆ›å»ºçŸ¥è¯†åŸŸ

```java
@Service
public class MyKnowledgeService {
    
    @Autowired
    private KnowledgeDomainService domainService;
    
    public void createTechDomain() {
        CreateDomainRequest request = CreateDomainRequest.builder()
            .domainId("tech-domain")
            .name("æŠ€æœ¯åŸŸ")
            .description("æŠ€æœ¯æ–‡æ¡£ã€æ¶æ„è®¾è®¡ã€APIæ–‡æ¡£")
            .type(DomainType.TECHNICAL)
            .metadata(Map.of("tags", Arrays.asList("tech", "architecture")))
            .build();
            
        KnowledgeDomain domain = domainService.createDomain(request);
        System.out.println("åˆ›å»ºåŸŸ: " + domain.getName());
    }
}
```

#### 2. å­˜å‚¨çŸ¥è¯†

```java
@Service
public class MyKnowledgeService {
    
    @Autowired
    private KnowledgeStorageService storageService;
    
    public void saveKnowledge() {
        RefinedKnowledge knowledge = RefinedKnowledge.builder()
            .knowledgeId(UUID.randomUUID().toString())
            .title("Spring Boot å¿«é€Ÿå…¥é—¨")
            .summary("Spring Boot æ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘æ¡†æ¶...")
            .refinedContent("è¯¦ç»†å†…å®¹...")
            .keywords(Arrays.asList("Spring Boot", "Java", "å¾®æœåŠ¡"))
            .domainId("tech-domain")
            .build();
            
        storageService.saveKnowledge(knowledge, "tech-domain");
    }
}
```

#### 3. æ™ºèƒ½æ£€ç´¢

```java
@Service
public class SearchService {
    
    @Autowired
    private CrossDomainQueryService queryService;
    
    public void search(String query, String userId) {
        // ä¸ªæ€§åŒ–è·¨åŸŸæŸ¥è¯¢
        CrossDomainQueryResult result = queryService
            .crossDomainSearchWithUser(query, 20, userId);
        
        System.out.println("æŸ¥è¯¢åˆ° " + result.getResults().size() + " ä¸ªç»“æœ");
        System.out.println("æ¶‰åŠ " + result.getQueriedDomains().size() + " ä¸ªåŸŸ");
        System.out.println("è·¯ç”±ç½®ä¿¡åº¦: " + result.getRouteConfidence());
        
        // æ˜¾ç¤ºç»“æœ
        for (Document doc : result.getResults()) {
            System.out.println("- " + doc.getContent());
        }
    }
}
```

#### 4. æŸ¥æ‰¾å…³è”çŸ¥è¯†

```java
@Service
public class AssociationService {
    
    @Autowired
    private KnowledgeAssociationService associationService;
    
    public void findRelated(String knowledgeId, String domainId) {
        // åŸŸå†…ç›¸å…³çŸ¥è¯†
        List<RefinedKnowledge> related = associationService
            .findRelatedKnowledge(knowledgeId, domainId, 10);
        
        System.out.println("åŸŸå†…ç›¸å…³çŸ¥è¯†:");
        for (RefinedKnowledge k : related) {
            System.out.println("  - " + k.getTitle());
        }
        
        // è·¨åŸŸç›¸å…³çŸ¥è¯†
        List<RefinedKnowledge> crossDomain = associationService
            .findCrossDomainRelatedKnowledge(
                knowledgeId, 
                domainId,
                Arrays.asList("java-domain", "security-domain"),
                10
            );
        
        System.out.println("è·¨åŸŸç›¸å…³çŸ¥è¯†:");
        for (RefinedKnowledge k : crossDomain) {
            System.out.println("  - " + k.getTitle() + 
                              " (" + k.getDomainId() + ")");
        }
    }
}
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. åŸŸè®¾è®¡åŸåˆ™

```yaml
# âœ… å¥½çš„åŸŸè®¾è®¡
domains:
  - id: java-spring
    name: "Java Spring æŠ€æœ¯æ ˆ"
    scope: "èšç„¦ Spring ç”Ÿæ€"
    
  - id: security
    name: "å®‰å…¨è®¤è¯"
    scope: "è®¤è¯ã€æˆæƒã€åŠ å¯†"
    
  - id: database
    name: "æ•°æ®åº“"
    scope: "MySQLã€Redisã€MongoDB"

# âŒ ä¸å¥½çš„åŸŸè®¾è®¡
domains:
  - id: tech
    name: "æŠ€æœ¯"
    scope: "å¤ªå®½æ³›ï¼Œä»€ä¹ˆéƒ½æ”¾"  # å¤±å»åŸŸéš”ç¦»çš„æ„ä¹‰
```

### 2. çŸ¥è¯†ç»„ç»‡

```
æ¨èç»“æ„:
é¡¹ç›®çŸ¥è¯†åº“
â”œâ”€ æŠ€æœ¯åŸŸ
â”‚  â”œâ”€ åç«¯æŠ€æœ¯
â”‚  â”‚  â”œâ”€ Spring Boot
â”‚  â”‚  â””â”€ æ•°æ®åº“
â”‚  â””â”€ å‰ç«¯æŠ€æœ¯
â”‚     â”œâ”€ React
â”‚     â””â”€ Vue
â”‚
â”œâ”€ ä¸šåŠ¡åŸŸ
â”‚  â”œâ”€ ç”¨æˆ·ç®¡ç†
â”‚  â”œâ”€ è®¢å•ç³»ç»Ÿ
â”‚  â””â”€ æ”¯ä»˜æµç¨‹
â”‚
â””â”€ æµ‹è¯•åŸŸ
   â”œâ”€ å•å…ƒæµ‹è¯•
   â”œâ”€ é›†æˆæµ‹è¯•
   â””â”€ æ€§èƒ½æµ‹è¯•
```

### 3. æ€§èƒ½ä¼˜åŒ–

```java
// 1. ä½¿ç”¨æ‰¹é‡æ“ä½œ
List<RefinedKnowledge> knowledgeList = ...;
storageService.saveBatch(knowledgeList, domainId);  // âœ…

// é¿å…å¾ªç¯å•ä¸ªä¿å­˜
for (RefinedKnowledge k : knowledgeList) {
    storageService.saveKnowledge(k, domainId);  // âŒ æ€§èƒ½å·®
}

// 2. åˆç†è®¾ç½®ç»“æœæ•°é‡
queryService.crossDomainSearch(query, 20);  // âœ… é€‚ä¸­

queryService.crossDomainSearch(query, 1000); // âŒ å¤ªå¤§ï¼Œæ€§èƒ½å·®

// 3. å¯ç”¨ç¼“å­˜
// å¯¹äºé«˜é¢‘æŸ¥è¯¢ï¼Œç¼“å­˜å¯ä»¥æå‡30å€æ€§èƒ½
```

### 4. ç”¨æˆ·åå¥½å­¦ä¹ 

```java
// è®°å½•ç”¨æˆ·è¡Œä¸º
@RestController
public class SearchController {
    
    @Autowired
    private UserPreferenceLearner preferenceLearner;
    
    @PostMapping("/search")
    public SearchResult search(@RequestParam String query,
                               @RequestHeader String userId) {
        // æ‰§è¡ŒæŸ¥è¯¢
        CrossDomainQueryResult result = queryService
            .crossDomainSearchWithUser(query, 20, userId);
        
        // è®°å½•ç”¨æˆ·æŸ¥è¯¢ï¼ˆè‡ªåŠ¨å­¦ä¹ åå¥½ï¼‰
        for (String domainId : result.getQueriedDomains()) {
            int resultCount = result.getDomainResults()
                .getOrDefault(domainId, Collections.emptyList())
                .size();
            preferenceLearner.recordQuery(userId, query, domainId, resultCount);
        }
        
        return toSearchResult(result);
    }
    
    @PostMapping("/feedback")
    public void feedback(@RequestParam String userId,
                        @RequestParam String domainId,
                        @RequestParam boolean helpful) {
        // è®°å½•åé¦ˆ
        preferenceLearner.recordDomainFeedback(userId, domainId, helpful);
    }
}
```

---

## ğŸ“Š æ¶æ„ä¼˜åŠ¿

### vs ä¼ ç»Ÿ RAG

| ç‰¹æ€§ | ä¼ ç»Ÿ RAG | OmniAgent çŸ¥è¯†ç½‘ç»œ |
|------|----------|-------------------|
| **çŸ¥è¯†ç»„ç»‡** | å•ä¸€å‘é‡ç©ºé—´ | å¤šåŸŸç‹¬ç«‹ç©ºé—´ â­ |
| **æ£€ç´¢ç­–ç•¥** | ç»Ÿä¸€ç­–ç•¥ | åŸŸä¸“ç”¨ç­–ç•¥ â­ |
| **è·¨åŸŸæŸ¥è¯¢** | ä¸æ”¯æŒ | æ™ºèƒ½è·¯ç”± + å¹¶å‘æŸ¥è¯¢ â­ |
| **ä¸ªæ€§åŒ–** | æ—  | ç”¨æˆ·åå¥½å­¦ä¹  â­ |
| **è´¨é‡ä¿è¯** | æ—  | è´¨é‡è¯„åˆ† + ç¼“å­˜ â­ |
| **çŸ¥è¯†å…³è”** | æ—  | è‡ªåŠ¨å…³è”å‘ç° â­ |

### æ€§èƒ½å¯¹æ¯”

| æ“ä½œ | ä¼ ç»Ÿæ–¹å¼ | çŸ¥è¯†ç½‘ç»œ | æå‡ |
|------|---------|---------|------|
| **å•åŸŸæŸ¥è¯¢** | 2ç§’ | 1.5ç§’ | 25% â¬†ï¸ |
| **è·¨åŸŸæŸ¥è¯¢** | 6ç§’ï¼ˆä¸²è¡Œï¼‰ | 2ç§’ï¼ˆå¹¶å‘ï¼‰ | **3å€** â¬†ï¸ |
| **é«˜é¢‘æŸ¥è¯¢** | 2ç§’ | 0.1ç§’ï¼ˆç¼“å­˜ï¼‰ | **20å€** â¬†ï¸ |
| **ä¸ªæ€§åŒ–æŸ¥è¯¢** | ä¸æ”¯æŒ | 1.8ç§’ | æ–°åŠŸèƒ½ âœ¨ |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- ğŸ§  [HOPE è‡ªå­¦ä¹ ç³»ç»Ÿ](HOPE_SYSTEM.md) - ä¸çŸ¥è¯†ç½‘ç»œé…åˆçš„æ™ºèƒ½æŸ¥è¯¢
- ğŸ—ï¸ [å®Œæ•´ç³»ç»Ÿæ¶æ„](ARCHITECTURE.md) - OmniAgent æ•´ä½“æ¶æ„
- ğŸ“¦ [æ¨¡å—æ¶æ„](MODULES.md) - çŸ¥è¯†æ³¨å†Œè¡¨æ¨¡å—è¯¦è§£
- ğŸš€ [å¿«é€Ÿå¼€å§‹](QUICKSTART.md) - å¦‚ä½•ä½¿ç”¨çŸ¥è¯†ç½‘ç»œ

---

**æ–‡æ¡£ç»´æŠ¤è€…ï¼š** OmniAgent Team  
**æœ€åæ›´æ–°ï¼š** 2026-01-01

